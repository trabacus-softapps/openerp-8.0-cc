<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="cc_partner_grp_form" model="ir.ui.view">
                    <field name="name">cc_grp.res.partner.form</field>
                    <field name="model">res.partner</field>
                    <field eval="1" name="priority"/>
                    <field name="arch" type="xml">
                        <form string="Partners" version="7.0">                            
                            <sheet>
                                <field name="image" widget='image' class="oe_left oe_avatar" options='{"preview_image": "image_medium", "size": [90, 90]}'/>
                                <div class="oe_title">
                                    <div class="oe_edit_only" attrs="{'invisible': ['|',('partner_type','in',['contact']),('parent_id','!=',False)]}">
                                        <label for="name"/> (
                                        <field name="is_company" on_change="onchange_type(is_company)" class="oe_inline"/>
                                        <label for="is_company" string="Is a Company?" />)
                                        
                                    </div>
                                    <h1>
                                        <field name="name" default_focus="1" placeholder="Name" />
                                    </h1>
                                    <field name="parent_id"
                                           placeholder="Company"
                                           domain="[('partner_type','=',partner_type),('parent_id','=',False)]" context="{'default_is_company': True, 'default_supplier': supplier, 'default_customer': customer,'default_partner_type':partner_type}"
                                           attrs="{'invisible': ['|',('partner_type','=','client'),('is_company','=',True)]}"
                                           on_change="onchange_ccparent_id(parent_id,context)"/>
                                    <field name="category_id" widget="many2many_tags" placeholder="Tags..."/>
        
                                   <field name="partner_type" required="1" invisible="1"/>
                                    <field name="check_role" invisible="1"/>    
                                    <field name="customer" invisible="1"/>
                                    <field name="supplier" invisible="1"/>
                                    
                                </div>
                                <div class="oe_right oe_button_box" name="buttons" style="width:330px;">
                                    <label for="cc_group"/><field name="cc_group"/>
                                    <label for="cc_fit"/><field name="cc_fit"/>
                                    <label for="preferred_venue" attrs="{'invisible': [('partner_type','!=','venue')]}"/><field name="preferred_venue" attrs="{'invisible': [('partner_type','!=','venue')]}"/>
                                    <label for='active'/><field name="active"/>                            
                                </div>
                                
                                <group>
                                    <group>
                                        <label for="type" invisible='1'/>
                                        <div  name="div_type" invisible='1'>
                                            <field class="oe_inline"
                                                name="type" />
                                        </div>
                                        
                                        <label for="street" string="Address"/>
                                        <div>
                                            <field name="use_parent_address" class="oe_edit_only oe_inline"
                                                on_change="onchange_address(use_parent_address, parent_id,context)"
                                                attrs="{'invisible': [('parent_id','=', False),('use_parent_address','=',False)]}"/>
                                           <label for="use_parent_address" class="oe_edit_only" attrs="{'invisible': [('parent_id','=', False),('use_parent_address','=',False)]}"/>
                                            <field name="street" placeholder="Street..."  attrs="{'readonly': [('use_parent_address','=',True)]}"/>
                                            <field name="street2"  attrs="{'readonly': [('use_parent_address','=',True)]}"/>
                                            <div class="address_format">
        <!--                                        <field name="location_id" placeholder="Location" attrs="{'readonly': [('use_parent_address','=',True)]}" options='{"no_open": True}' style="width: 49%%" on_change="onchange_location(location_id)"/>-->
                                                <field name="city" placeholder="City" style="width: 49%%" attrs="{'readonly': [('use_parent_address','=',True)]}" domain="[('state_id', '=', state_id)]"/>
                                                <field name="zip" placeholder="ZIP" style="width: 49%%" attrs="{'readonly': [('use_parent_address','=',True)]}"/>
                                                <field name="state_id" class="oe_no_button" placeholder="State" style="width: 49%%" options='{"no_open": True}' on_change="onchange_state(state_id)" attrs="{'readonly': [('use_parent_address','=',True)]}"/>
                                                <field name="country_id" placeholder="Country" options='{"no_open": True}' attrs="{'readonly': [('use_parent_address','=',True)]}" style="width: 49%%"/>
                                            </div>      
                                            <field name="tstation_id" placeholder="Tube Station" attrs="{'invisible': [('type','!=','default'),('partner_type','!=','venue')]}"/>
                                        </div>
                                        <field name="website" widget="url" placeholder="e.g. www.openerp.com"/>
                                        <field name="vat" attrs="{'invisible': [('type','!=','invoice')],'required':[('partner_type','=','venue'),('parent_id','=',False)]}" string="VAT"/>
                                        <field name='sc_included'  attrs="{'invisible': [('partner_type','!=','venue')]}"/>
                                        <field name="menu_sc"  attrs="{'invisible': [('partner_type','!=','venue')]}"/>
                                    </group>
                                    <group>
                                        <field name="contact_ids" placeholder="e.g. John" attrs="{'invisible': [('parent_id','=',False)]}" domain="[('parent_id','=',parent_id),('type','=','contact')]" widget="many2many_tags"/>
                                        <field name="inv_contact_ids" placeholder="e.g. John" attrs="{'invisible': [('type','in',['contact','invoice']),('parent_id','=',False)]}" domain="[('parent_id','=',parent_id),('type','=','contact')]" widget="many2many_tags"/>
                                        <field name="addressed_email"/>
                                        <field name="function" placeholder="e.g. Sales Director" invisible="1"/>
                                        <field name="phone" placeholder="e.g. +32.81.81.37.00"/>
                                        <field name="phone2" attrs="{'invisible': [('partner_type','=','venue')]}"
                                            placeholder="e.g. +12.85.81.37.99"/>
                                        <field name="mobile"/>
                                        <field name="fax"/>
                                        <field name="user_ids" invisible="1"/>
                                        <field name="email" widget="email" attrs="{'required': [('user_ids','!=', [])]}"/>
                                        <field name="email2" widget="email"
                                            attrs="{'invisible': [('partner_type','=','venue')]}"/>                                
                                        <field name="company_reg_no" attrs="{'invisible': [('type','!=','invoice')],'required':[('partner_type','=','venue'),('parent_id','=',False)]}"/>
                                        <field name="menu_commsion"  attrs="{'invisible': [('partner_type','!=','venue')]}"/>
                                    </group>
                                </group>
                                
                                <notebook colspan="4">
                                    <page string="Contacts" attrs="{'invisible': ['|',('parent_id','!=',False),('is_company','=',False),('partner_type','in',['venue','contact'])]}" autofocus="autofocus">
                                        <field name="child_ids"
                                               domain="[('cc_group','=',True)]"
                                               context="{'default_type':'contact','default_parent_id': active_id,
                                                         'default_street': street, 'default_street2': street2,
                                                         'default_state_id': state_id, 'default_zip': zip, 'default_country_id':country_id, 
                                                         'default_supplier': supplier, 'default_email2': email2, 'default_phone2': phone2, 'default_partner_type':'contact','default_cc_group':True}">
                                            <tree string="Contacts">
                                                <field name="display_name"/>
                                                <field name="cc_fit"/>
                                                <field name="cc_group"/>
                                            </tree>
                                            <form string="Contact" version="7.0">
                                                <sheet>
                                                    <field name="image" widget='image' class="oe_avatar oe_left" options='{"preview_image": "image_medium"}'/>
                                                    <div class="oe_title">
                                                        <label for="name" class="oe_edit_only"/>
                                                        <h1><field name="name" style="width: 70%%"/></h1>
                                                        <field name="category_id" widget="many2many_tags" placeholder="Tags..." style="width: 70%%"/>
                                                    </div>
                                                    <group>
                                                        <field name="function" placeholder="e.g. Sales Director"/>
                                                        <field name="email"/>
                                                        <field name="phone"/>
                                                        <field name="mobile"/>
                                                        <field name="cc_fit" invisible="1"/>
                                                        <field name="partner_type" invisible="1"/>
                                                    </group>
                                                    <div>
                                                        <field name="use_parent_address"/><label for="use_parent_address"/>
                                                    </div>
                                                    <group>
                                                        <label for="type"/>
                                                        <div name="div_type">
                                                            <field class="oe_inline" name="type" invisible="1"/>
                                                        </div>
                                                        <label for="street" string="Address" attrs="{'invisible': [('use_parent_address','=', True)]}"/>
                                                        <div attrs="{'invisible': [('use_parent_address','=', True)]}" name="div_address">
                                                            <field name="street" placeholder="Street..."/>
                                                            <field name="street2"/>
                                                            <div class="address_format">
        <!--                                                        <field name="location_id" placeholder="Location" options='{"no_open": True}' style="width: 49%%" on_change="onchange_location(location_id)"/>-->
                                                                <field name="city" placeholder="City" style="width: 49%%" attrs="{'readonly': [('use_parent_address','=',True)]}" domain="[('state_id', '=', state_id)]"/>
                                                                <field name="zip" placeholder="ZIP" style="width: 49%%" attrs="{'readonly': [('use_parent_address','=',True)]}"/>
                                                                <field name="state_id" class="oe_no_button" placeholder="State" style="width: 49%%" options='{"no_open": True}' on_change="onchange_state(state_id)" attrs="{'readonly': [('use_parent_address','=',True)]}"/>
                                                                <field name="country_id" placeholder="Country" options='{"no_open": True}' style="width: 49%%"/>
                                                                
                                                            </div>
                                                        </div>
                                                    </group>
                                                    <field name="supplier" invisible="True"/> 
                                                    <field name="customer" invisible="True"/>
                                                </sheet>
                                            </form>
                                        </field>
                                    </page>      
                                    <page string="Other Information" attrs="{'invisible': [('type','!=','default')]}">
                                        <group col="4" colspan="2">
                                            <field name="cuisine_ids" widget="many2many_tags"/>
                                            <field name="no_of_covers"/>
                                            <field name="main_covers"/>
                                            <field name="room_covers"/>
                                            <field name="semi_covers"/>
                                            <field name="private_rooms" required="1"/>
                                        </group>
                                        <group col="4" colspan="2">
                                            <separator colspan="2" string="Description of the Venue"/>
                                            <separator colspan="2" string="Outstanding Features"/>
                                            <hr width="100%%" colspan="4"/>
                                            <field colspan="2" name="descp_venue" nolabel="1"/>
                                            <field colspan="2" name="features" nolabel="1"/>
                                        </group>
                                        <group col="4" colspan="2">
                                            <separator colspan="2" string="Cancellation Policy"/>
                                            <separator colspan="2" string="Terms &amp; Conditions"/>
                                            <hr width="100%%" colspan="4"/>
                                            <field colspan="2" name="cancel_policy" nolabel="1"/>
                                            <field colspan="2" name="terms_conditions" nolabel="1"/>
                                        </group>
                                    </page>
                                    <page string="Bank Details" attrs="{'invisible': ['|',('partner_type','=','contact'),('type','in',['default','contact'])]}">
                                        <group col="4" colspan="2">
                                            <field name="acc_name"/>
                                            <field name="bank_name"/>
                                            <field name="branch_addrs"/>
                                            <field name='acc_no'/>
                                            <field name='sort_code'/>
                                            <field name='swift'/>
                                            <field name='iban'/>
                                            <field name='chaps'/>                                    
                                        </group>
                                    </page>
                                    <page string="Private Rooms" attrs="{'invisible': [('type','!=','default')]}">
                                        <field name="rooms_ids" mode="tree">
                                            <tree string="Private Rooms" version="7.0" editable="top">
                                                <field name="name" required="1"/>
                                                <field name="no_of_seated"/>
                                                <field name="no_of_standing"/>
                                                <field name="max_nos"/>
                                                <field name="av_screen"/>
                                                <field name="projector"/>
                                                <field name="others"/>
                                            </tree>
                                        </field>
                                    </page>
                                    <page string="Opening Hours" attrs="{'invisible': [('type','!=','default')]}">
                                        <field name="open_hrs_ids" mode="tree">
                                            <tree string="Opening Hours" version="7.0" editable="top">
                                                <field name="name" required="1"/>
                                                <field name="bf_from" widget="float_time"
                                                    on_change="onchange_time(bf_from,bf_to,lunch_from,lunch_to,dinner_from,dinner_to)"/>
                                                <field name="bf_to" widget="float_time"
                                                    on_change="onchange_time(bf_from,bf_to,lunch_from,lunch_to,dinner_from,dinner_to)"/>
                                                <field name="lunch_from" widget="float_time"
                                                    on_change="onchange_time(bf_from,bf_to,lunch_from,lunch_to,dinner_from,dinner_to)"/>
                                                <field name="lunch_to" widget="float_time"
                                                    on_change="onchange_time(bf_from,bf_to,lunch_from,lunch_to,dinner_from,dinner_to)"/>
                                                <field name="dinner_from" widget="float_time"
                                                    on_change="onchange_time(bf_from,bf_to,lunch_from,lunch_to,dinner_from,dinner_to)"/>
                                                <field name="dinner_to" widget="float_time"
                                                    on_change="onchange_time(bf_from,bf_to,lunch_from,lunch_to,dinner_from,dinner_to)"
                                                />
                                            </tree>
                                        </field>
                                    </page>
                                    <page string="Menu" attrs="{'invisible': [('type','!=','default')]}">
                                        <field name="menus_ids" mode="tree" context="{'default_food_type':'meal','default_cc_group':True}"/>
                                    </page>
                                    <page string="Drinks" attrs="{'invisible': [('type','!=','default')]}">
                                        <field name="drink_ids" mode="tree" context="{'default_food_type':'drink','default_cc_group':True}">
                                            <tree string="Drinks">
                                                <field name="name"/>
                                                <field name="description"/>
                                                <field name="drink_size"/>
                                                <field name='rest_price' string="Price" />
                                                <field name='markup' />
                                                <field name='to_price' string="Total"/>
                                                <field name='food_type' invisible="1"/>
                                            </tree>
                                            <form string="Menu" version="7.0">
                                                <sheet>
                                                    <div class="oe_title">                                                
                                                        <label for="name" class="oe_edit_only"/>
                                                        <h1>
                                                            <field name="name" style="width: 70%%" required="1"/>
                                                        </h1>
                                                    </div>
                                                    <div class="oe_right oe_button_box" name="buttons" style="width:290px;">
                                                        <label for="active"/><field name="active"/>
                                                        <newline/>
                                                    </div>
                                                    <group colspan="2" col="6">
                                                        <field name="drink_size" colspan="1" style="width:7em;"/>  
                                                        <newline/>
                                                    </group>
                                                    <separator string="Description" colspan="4"/>
                                                    <field name="description" colspan="4"/>
                                                    
                                                    <separator string="Pricing" colspan="4"/>
                                                    <group colspan='2' col='4'>
                                                        <field name="sc_included" on_change="get_tourop_price(food_type, rest_price, markup, service_charge, sc_included, sc_disc,context)" context="{'mu_update':True}"/>
                                                        <field name="sc_disc" attrs="{'invisible': [('sc_included','=',True)]}" on_change="get_tourop_price(food_type, rest_price, markup, service_charge, sc_included, sc_disc,context)" context="{'mu_update':True}"/>
                                                        <field name="service_charge" attrs="{'invisible': [('sc_included','=',True)]}" on_change="get_tourop_price(food_type, rest_price, markup, service_charge, sc_included, sc_disc,context)" context="{'mu_update':True}"/>
                                                        <field name="to_price" style="font-weight:bold;font-size:11pt;"/> 
                                                        <newline/>
                                                        <field name="rest_price" on_change="get_tourop_price(food_type, rest_price, markup, service_charge, sc_included, sc_disc,context)" context="{'mu_update':False}"/>                                               
                                                        <field name="markup" on_change="get_tourop_price(food_type, rest_price, markup, service_charge, sc_included, sc_disc,context)" context="{'mu_update':True}"/>
                                                        <field name='food_type' invisible="1"/>
                                                    </group>
                                                </sheet>
                                            </form>
                                        </field> 
                                    </page>
                                    <page string="Photos" attrs="{'invisible': [('type','!=','default')]}">
                                        <group colspan="2" col="4">
                                            <field name="cc_image1" widget="image" nolabel="1" colspan="2"/>
                                            <field name="cc_image2" widget="image" nolabel="1" colspan="2"/>
                                            <field name='desc_image1' placeholder="Description" nolabel="1" colspan="2"/>
                                            <field name='desc_image2' placeholder="Description" nolabel="1" colspan="2"/>
                                            <field name="cc_image3" widget="image" nolabel="1" colspan="2"/>
                                            <field name="cc_image4" widget="image" nolabel="1" colspan="2"/>
                                            <field name='desc_image3' placeholder="Description" nolabel="1" colspan="2"/>
                                            <field name='desc_image4' placeholder="Description" nolabel="1" colspan="2"/>
                                            <newline/>
                                        </group>
                                    </page>

                                    <page name='internal_notes' string="Internal Notes">
                                        <field name="comment" placeholder="Put an internal note..."/>
                                    </page>                            
                                    <page string="Terms &amp; Conditions" attrs="{'invisible': [('type','!=','invoice')]}">
                                        <group col="4" colspan="2">
                                            <field name="accept_tc"/>
                                            <field name="terms_conditions" nolabel="1" placeholder="Terms &amp; Conditions" colspan="4"/>
                                        </group>
                                    </page>
                                </notebook>
                            </sheet>
                        </form>
                    </field>
                </record>
        
    </data>
</openerp>
