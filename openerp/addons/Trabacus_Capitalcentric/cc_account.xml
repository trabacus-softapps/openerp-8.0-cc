<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    	
    	<menuitem name="Accounting"  
            	  id="account.menu_finance"
            	  groups="account.group_account_user,account.group_account_manager,account.group_account_invoice,Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo"
            	  sequence="50"/> 

    	<!--         Overridden: Invoice Search    -->
    	<record id="view_cc_invoice_filter" model="ir.ui.view">
    		<field name="name">view_cc_invoice_filter</field>
    		<field name="model">account.invoice</field>
    		<field name="inherit_id" ref="account.view_account_invoice_filter"/>
    		<field name="arch" type="xml">
    			<filter name="draft" string="Draft" domain="[('state','=','draft')]" help="Draft Invoices" position='before'>
    				<filter name="current" string="Current" domain="[('state','not in',['paid','cancel'])]" help="Draft and Open Invoices"/>
    				<filter name="overdue" string="Overdue" domain="[('date_due','&lt;', time.strftime('%%Y-%%m-%%d')),('state','=','open')]" help="These are invoices where CURRENT DATE > DUE DATE"/>
    				<filter name="at_last_month" string="Last Month AT" domain="[('state','=','draft'),('service_type','=','noontea')]" context="{'prev_month':True}"/>
    				<filter name="at_curr_month" string="Current Month AT" domain="[('state','=','draft'),('service_type','=','noontea')]" context="{'curr_month':True}"/>
    				<filter name="at_nxt_month" string="Next Month AT" domain="[('state','=','draft'),('service_type','=','noontea')]" context="{'nxt_month':True}"/>
    				<filter name="ven_last_month" string="Last Month Venue" domain="[('state','=','draft'),('service_type','=','venue')]" context="{'prev_month':True}"/>
    				<filter name="ven_curr_month" string="Current Month Venue" domain="[('state','=','draft'),('service_type','=','venue')]" context="{'curr_month':True}"/>
    				<filter name="ven_nxt_month" string="Next Month Venue" domain="[('state','=','draft'),('service_type','=','venue')]" context="{'nxt_month':True}"/>
    				<filter name="curr_month_inv" string="Current Month Invoices" domain="[]" context="{'curr_month_inv':True}"/>
    				<filter name="nxt_month_inv" string="Next Month Invoices" domain="[]" context="{'nxt_month_inv':True}"/>
    				<filter name="last_month_inv" string="Last Month Invoices" domain="[]" context="{'prev_month_inv':True}"/>
    			</filter>
				<field name="user_id" string="Salesperson" position="after">
					 <field name="booking_date" context="{'search_bkingdate':True}"/>
				 </field>
    		</field>
    	</record>

    	<!--         Overridden: Invoice Tree    -->
    	<record id="view_cc_invoice_tree" model="ir.ui.view">
    		<field name="name">view_cc_invoice_tree</field>
    		<field name="model">account.invoice</field>
    		<field name="inherit_id" ref="account.invoice_tree"/>
    		<field name="arch" type="xml">
    			<field name="date_invoice" position="after">
    				<field name="booking_date"/>
    			</field>
    			<field name="partner_id" position="before">
    				<field name="create_date"/>
    			</field>
    			<field name="user_id" position="replace">
    				<field name="sales_person"/>
    			</field>
    		</field>
    	</record>
    	
		<!--         Overridden: Invoice Line Form    -->
        <record id="view_cc_invoice_line_form" model="ir.ui.view">
	            <field name="name">view_cc_invoice_line_form</field>
	            <field name="model">account.invoice.line</field>
	            <field name="inherit_id" ref="account.view_invoice_line_form"/>
	            <field name="arch" type="xml">
	            <form string="Invoice Line" version="7.0" position='replace'>
	            	<form string="Invoice Line" version="7.0">
	                    <group>
	                        <group>
	                            <field name="product_id" invisible='1' on_change="product_id_change(product_id, uos_id, quantity, name, parent.type, parent.partner_id, parent.fiscal_position, price_unit, parent.currency_id, context, parent.company_id)"/>
	                            <field domain="[('company_id', '=', parent.company_id), ('journal_id', '=', parent.journal_id), ('type', '&lt;&gt;', 'view')]" name="account_id" on_change="onchange_account_id(product_id, parent.partner_id, parent.type, parent.fiscal_position,account_id)" groups="account.group_account_user"/>
	                            <label for="quantity" string='Covers'/>
	                            <div>
	                                <field name="quantity" class="oe_inline"/>
	                                <field name="uos_id" class="oe_inline" groups="product.group_uom" invisible='1'
	                                  on_change="uos_id_change(product_id, uos_id, quantity, name, parent.type, parent.partner_id, parent.fiscal_position, price_unit, parent.currency_id, context, parent.company_id)"/>
	                            </div>	                            
	                            <field name="discount" groups="sale.group_discount_per_so_line"/>	                             
	                        	<field name='sc_included' />
	                        </group>
	                        <group>	 
	                        	<field name="price_unit" string='Price'/>                       	
	                        	<field name='price_subtotal'/>
	                        	<field name="invoice_line_tax_id" context="{'type':parent.type}" domain="[('parent_id','=',False),('company_id', '=', parent.company_id)]" widget="many2many_tags"/>                 
	                            <field domain="[('type','&lt;&gt;','view'), ('company_id', '=', parent.company_id)]" name="account_analytic_id" groups="analytic.group_analytic_accounting" invisible='1'/>
	                            <field name="company_id" groups="base.group_multi_company" readonly="1"/>
	                        </group>
	                    </group>
	                    <label for="name"/>
	                    <field name="name"/>
                	</form> 
             	</form>
             	</field>
    	</record>

<!--         Overridden: Suppline Invoice Form    -->    	
    	<record id="view_cc_supplier_form" model="ir.ui.view">
	            <field name="name">view_cc_supplier_form</field>
	            <field name="model">account.invoice</field>
	            <field name="inherit_id" ref="account.invoice_supplier_form"/>
	            <field name="arch" type="xml">
	            
	            	<field name="date_due" position="attributes">
	            		<attribute name="required">0</attribute>
	            	</field>
	            	
		            <field name="date_due" position='after'>
                        <field name='booking_date' on_change="onchange_booking_date(booking_date)"/>
		            	<field name='service_type' readonly='0'/> 
		            	<field name='lead_id' readonly='1' context="{'service_type':service_type}"/>
		            	<field name="passen_type" invisible="1"/>
		            </field>	
	            	
	            	<field name="partner_id" position="attributes">
	            		<attribute name="domain">[]</attribute>
	            	</field>
		            
		            <xpath expr="//notebook/page/field/tree[@string='Invoice lines']" position="attributes">
		            	<attribute name="editable"></attribute>
		            </xpath>
		            		            
		            <xpath expr="//notebook/page/field/tree/field[@name='product_id']" position="attributes">
		            	<attribute name="invisible">1</attribute>
		            </xpath>
		            <xpath expr="//notebook/page/field/tree/field[@name='account_id']" position="replace"/>
		            	            
		            <xpath expr="//notebook/page/field/tree/field[@name='quantity']" position="attributes">
		            	<attribute name="string">Covers</attribute>
		            </xpath>
		            <xpath expr="//notebook/page/field/tree/field[@name='price_unit']" position="attributes">
		            	<attribute name="string">Restaurant Price</attribute>
		            </xpath>
		            <xpath expr="//header/button[@string='Validate']" position="attributes">
		            	<attribute name="groups">Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo</attribute>
		            </xpath>

	            	<xpath expr="//form/sheet/group" position="after">
	            		<group col='4' colspan='4'>
                            <field name="period_id" string="Accounting Period" required="1"/>
                            <field name="vat_period_id" string="VAT Period" required="0"/>
                            </group>
                            <group><field name="cc_notes"/></group>
	            	</xpath>

    	            <xpath expr="//form/sheet/notebook/page[@string='Other Info']/group/group/field[@name='period_id']" position="replace">
		            </xpath>
		            <xpath expr="//header/button[@string='Set to Draft']" position="attributes">
		            	<attribute name="groups">Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo</attribute>
		            </xpath>
		            <field name='supplier_invoice_number' position="attributes">
		            	<attribute name='required'>0</attribute>
		            </field>
	            	
	            	<xpath expr="//field[@name='fiscal_position']" position="after">
	            		<field name="sales_person" context="{'show_user_email':True}"/>
	            	</xpath>

					<xpath expr="//form/sheet/group/group/field[@name='date_invoice']" position="attributes">
		                <attribute name="on_change">onchange_date_invoice(date_invoice)</attribute>
                    </xpath>
	            	
	            	<page string='Payments' position='replace'>
	            		<page string='Payments'>
	            			<field name="cc_payment_ids" mode='tree' context="{'form_view_ref': 'account_voucher.view_vendor_payment_form'}">
	            				<tree colors="blue:state == 'draft';gray:state == 'cancel';red:audit" string="Supplier Payments">
	            					<field name="date"/>
	            					<field name="number"/>
	            					<field name="reference"/>
	            					<field name="partner_id"/>
	            					<field name='name'/>
	            					<field name="journal_id" groups="account.group_account_user"/>
	            					<field name="period_id" invisible="context.get('visible', True)"/>
	            					<field name="type" invisible="context.get('visible', True)"/>
	            					<field name="amount" sum="Total Amount"/>
	            					<field name="audit" invisible="1"/>
	            					<field name="state"/>
	            				</tree>
	            			</field>
	            		</page>	
	            	</page>
		         
	            </field>       
	    </record>
    	<!--         Overridden: Supplier Invoice Action    -->
    	<record id="account.action_invoice_tree2" model="ir.actions.act_window">
    		<field name="name">Supplier Invoices</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','in_invoice')]</field>
    		<field name="context">{'search_default_current':1,'default_type': 'in_invoice', 'type': 'in_invoice', 'journal_type': 'purchase','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to record a new supplier invoice.
    			</p><p>
    				You can control the invoice from your supplier according to
    				what you purchased or received. OpenERP can also generate
    				draft invoices automatically from purchase orders or receipts.
    			</p>
    		</field>
    	</record>
    	
    	<!-- Group Bookings -> Accounting -> Supplier Invoice -->
    	<record id="action_supp_invoice_group" model="ir.actions.act_window">
    		<field name="name">Supplier Invoices</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','in_invoice'),('passen_type','=','group')]</field>
    		<field name="context">{'search_default_current':1,'default_type': 'in_invoice', 'type': 'in_invoice', 'journal_type': 'purchase','default_passen_type':'group','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to record a new supplier invoice.
    			</p><p>
    				You can control the invoice from your supplier according to
    				what you purchased or received. OpenERP can also generate
    				draft invoices automatically from purchase orders or receipts.
    			</p>
    		</field>
    	</record>
    	<menuitem action="action_supp_invoice_group" id="menu_supp_invoice_group" parent="menu_cc_suppliers_group" sequence="1"/>


    	<!-- Group Bookings -> Accounting -> Supplier Refunds -->
    	<record id="action_supp_refunds_group" model="ir.actions.act_window">
    		<field name="name">Supplier Refunds</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','in_refund'),('passen_type','=','group')]</field>
    		<field name="context">{'search_default_current':1,'default_type': 'in_refund', 'type': 'in_refund', 'journal_type': 'purchase','default_passen_type':'group','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to register a refund you received from a supplier.
    			</p><p>
    				Instead of creating the supplier refund manually, you can generate
    				refunds and reconcile them directly from the related supplier invoice.
    			</p>
    		</field>
    	</record>
    	<menuitem action="action_supp_refunds_group" id="menu_supp_refunds_group" parent="menu_cc_suppliers_group" sequence="2"/>
    	
    	<!-- Group Bookings -> Accounting -> Supplier Payments -->
    	<record id="action_supp_payment_group" model="ir.actions.act_window">
    		<field name="name">Supplier Payments</field>
    		<field name="res_model">account.voucher</field>
    		<field name="view_type">form</field>
    		<field name="domain">[('journal_id.type', 'in', ['bank', 'cash']), ('type','=','payment')]</field>
    		<field name="context">{'type':'payment','default_passen_type':'group'}</field>
    		<field name="view_id" eval="False"/>
    		<field name="search_view_id" ref="account_voucher.view_voucher_filter_vendor_pay"/>
    		<field name="target">current</field>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to create a new supplier payment.
    			</p><p>
    				OpenERP helps you easily track payments you make and the remaining balances you need to pay your suppliers.
    			</p>
    		</field>
    	</record>
    	<record id="action_supp_payment_tree_group" model="ir.actions.act_window.view">
    		<field eval="1" name="sequence"/>
    		<field name="view_mode">tree</field>
    		<field name="act_window_id" ref="action_supp_payment_group"/>
    	</record>
    	<record id="action_supp_payment_form" model="ir.actions.act_window.view">
    		<field eval="2" name="sequence"/>
    		<field name="view_mode">form</field>
    		<field name="view_id" ref="account_voucher.view_vendor_payment_form"/>
    		<field name="act_window_id" ref="action_supp_payment_group"/>
    	</record>
    	
    	
    	<menuitem action="action_supp_payment_group" icon="STOCK_JUSTIFY_FILL" sequence="3"
    		id="menu_supp_payment_group"  parent="menu_cc_suppliers_group"/>
    	
    	<!-- FIT -> Accounting -> Supplier Invoice -->
    	<record id="action_supp_invoice_fit" model="ir.actions.act_window">
    		<field name="name">Supplier Invoices</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','in_invoice'),('passen_type','=','fit')]</field>
    		<field name="context">{'search_default_current':1,'default_type': 'in_invoice', 'type': 'in_invoice', 'journal_type': 'purchase','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to record a new supplier invoice.
    			</p><p>
    				You can control the invoice from your supplier according to
    				what you purchased or received. OpenERP can also generate
    				draft invoices automatically from purchase orders or receipts.
    			</p>
    		</field>
    	</record>
    	<menuitem action="action_supp_invoice_fit" id="menu_supp_invoice_fit" parent="menu_cc_suppliers_fit" sequence="1"/>

    	<!-- FIT -> Accounting -> Supplier Refunds -->
    	<record id="action_supp_refunds_fit" model="ir.actions.act_window">
    		<field name="name">Supplier Refunds</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','in_refund'),('passen_type','=','fit')]</field>
    		<field name="context">{'search_default_current':1,'default_type': 'in_refund', 'type': 'in_refund', 'journal_type': 'purchase','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to register a refund you received from a supplier.
    			</p><p>
    				Instead of creating the supplier refund manually, you can generate
    				refunds and reconcile them directly from the related supplier invoice.
    			</p>
    		</field>
    	</record>
    	<menuitem action="action_supp_refunds_fit" id="menu_supp_refunds_fit" parent="menu_cc_suppliers_fit" sequence="2"/>

    	<!-- FIT -> Accounting -> Supplier Payments -->
    	<record id="action_supp_payment_fit" model="ir.actions.act_window">
    		<field name="name">Supplier Payments</field>
    		<field name="res_model">account.voucher</field>
    		<field name="view_type">form</field>
    		<field name="domain">[('journal_id.type', 'in', ['bank', 'cash']), ('type','=','payment')]</field>
    		<field name="context">{'type':'payment','default_passen_type':'fit'}</field>
    		<field name="view_id" eval="False"/>
    		<field name="search_view_id" ref="account_voucher.view_voucher_filter_vendor_pay"/>
    		<field name="target">current</field>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to create a new supplier payment.
    			</p><p>
    				OpenERP helps you easily track payments you make and the remaining balances you need to pay your suppliers.
    			</p>
    		</field>
    	</record>
    	<record id="action_supp_payment_tree_fit" model="ir.actions.act_window.view">
    		<field eval="1" name="sequence"/>
    		<field name="view_mode">tree</field>
    		<field name="act_window_id" ref="action_supp_payment_fit"/>
    	</record>
    	<record id="action_supp_payment_fit_form" model="ir.actions.act_window.view">
    		<field eval="2" name="sequence"/>
    		<field name="view_mode">form</field>
    		<field name="view_id" ref="account_voucher.view_vendor_payment_form"/>
    		<field name="act_window_id" ref="action_supp_payment_fit"/>
    	</record>
    	
    	
    	<menuitem action="action_supp_payment_fit" icon="STOCK_JUSTIFY_FILL" sequence="3"
    		id="menu_supp_payment_fit"  parent="menu_cc_suppliers_fit"/>
    	

		<!--         Overridden: Invoice Form    -->
    	<record id="view_cc_invoice_form" model="ir.ui.view">
	            <field name="name">view_cc_invoice_form</field>
	            <field name="model">account.invoice</field>
	            <field name="inherit_id" ref="account.invoice_form"/>
	            <field name="arch" type="xml">
	            
		            <field name="date_invoice" position='after'>	
		            	<field name='booking_date' on_change="onchange_booking_date(booking_date)"/>
		            	<field name='service_type' readonly='0'/> 
		            	<field name='lead_id' readonly='1' context="{'service_type':service_type}"/>
		            	<field name='purchase_order'/>
		            	<field name="passen_type" invisible="1"/>
		            </field>


                    <xpath expr="//form/sheet/group/group/field[@name='date_invoice']" position="attributes">
		                <attribute name="on_change">onchange_date_invoice(date_invoice)</attribute>
                    </xpath>
	            	
	            	<field name="partner_id" position="attributes">
	            		<attribute name="domain">[]</attribute>
	            	</field>
		            
		            <xpath expr="//header/button[@string='Validate']" position="attributes">
		            	<attribute name='groups'>Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo</attribute>
		            </xpath>
		            <xpath expr="//header/button[@string='Send by Email']" position="attributes">
		            	<attribute name='groups'>Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo</attribute>
		            </xpath>
		            <xpath expr="//header/button[@string='Refund Invoice']" position="attributes">
		            	<attribute name='groups'>Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo</attribute>
		            </xpath>
		            <xpath expr="//header/button[@string='Refund Invoice']" position="attributes">
		            	<attribute name='groups'>Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo</attribute>
		            </xpath>
		            
		            <xpath expr="//notebook/page/field/tree[@string='Invoice Lines']" position="attributes">
		            	<attribute name="editable"></attribute>
		            </xpath>
		            <xpath expr="//notebook/page/field/tree/field[@name='product_id']" position="attributes">
		            	<attribute name="invisible">1</attribute>
		            </xpath>
		             <xpath expr="//notebook/page/field/tree/field[@name='account_id']" position="replace"/>

		            <xpath expr="//notebook/page/field/tree/field[@name='quantity']" position="attributes">
		            	<attribute name="string">Covers</attribute>
		            </xpath>
		            <xpath expr="//notebook/page/field/tree/field[@name='price_unit']" position="attributes">
		            	<attribute name="string">Price</attribute>
		            </xpath>
					
	            	<xpath expr="//field[@name='fiscal_position']" position="after">
	            		<field name="sales_person" context="{'show_user_email':True}"/>
	            	</xpath>
					
					<field name="date_due" position="replace"/>
	            	<field name="date_invoice" position="after">
	            		<field name="date_due" attrs="{'required':[('type','=','out_invoice'),('state','!=','cancel')]}"/>
	            	</field>
		           <button name="invoice_print" string="Print" type="object" attrs="{'invisible':['|',('sent','=',True), ('state', '!=', 'open')]}" class="oe_highlight" groups="base.group_user" position='replace'/>
		            <button name="invoice_print" string="Print Invoice" type="object" attrs="{'invisible':['|',('sent','=',False), ('state', '!=', 'open')]}" groups="base.group_user" position='replace'>		
		            	<button name="print_invoice" string="Print Invoice" type="object" attrs="{'invisible':['|',('sent','=',True), ('state', '!=', 'open')]}" class="oe_highlight"/>            	
		            </button>
	           <!-- 	<button name="action_invoice_sent" type="object" string="Send by Email" attrs="{'invisible':['|',('sent','=',True), ('state', '!=', 'open')]}" position="replace">
	            		<button name="action_invoice_sent" type="object" string="Send by Email" attrs="{'invisible':[('state', 'not in', ['open','paid'])]}" class="oe_highlight"/>
	            	</button> -->
	            	<xpath expr="//form/sheet/group" position="after">
	            		<group col='4' colspan='4'>
                            <field name="period_id" string="Accounting Period" required="1"/>
                            <field name="vat_period_id" string="VAT Period" required="1"/>
                            </group>
                            <group><field name="cc_notes"/></group>
	            	</xpath>

    	            <xpath expr="//form/sheet/notebook/page[@string='Other Info']/group/group/field[@name='period_id']" position="replace">
		            </xpath>

		            <xpath expr="//header/button[@string='Reset to Draft']" position="attributes">
		            	<attribute name="groups">Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo</attribute>
		            </xpath>
	            	<page string='Payments' position='replace'>
	            		<page string='Payments'>
	            			<field name="cc_payment_ids" mode='tree' context="{'form_view_ref': 'account_voucher.view_vendor_receipt_form'}">
	            				<tree colors="blue:state == 'draft';gray:state == 'cancel';red:audit" string="Supplier Payments">
	            					<field name="date"/>
	            					<field name="number"/>
	            					<field name="reference"/>
	            					<field name="partner_id"/>
	            					<field name='name'/>
	            					<field name="journal_id" groups="account.group_account_user"/>
	            					<field name="period_id" invisible="context.get('visible', True)"/>
	            					<field name="type" invisible="context.get('visible', True)"/>
	            					<field name="amount" sum="Total Amount"/>
	            					<field name="audit" invisible="1"/>
	            					<field name="state"/>
	            				</tree>	            				
	            			</field>
	            		</page>	
	            	</page>
	            </field>       
	    </record>
    	<!--         Overridden: Customer Invoice Action   -->
    	<record id="account.action_invoice_tree1" model="ir.actions.act_window">
    		<field name="name">Customer Invoices</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','out_invoice')]</field>
    		<field name="context">{'search_default_current':1,'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to create a customer invoice.
    			</p><p>
    				OpenERP's electronic invoicing allows to ease and fasten the
    				collection of customer payments. Your customer receives the
    				invoice by email and he can pay online and/or import it
    				in his own system.
    			</p><p>
    				The discussions with your customer are automatically displayed at
    				the bottom of each invoice.
    			</p>
    		</field>
    	</record>

    	<!-- Group Bookings -> Accounting -> Customer Invoice -->
    	<record id="action_cust_invoice_group" model="ir.actions.act_window">
    		<field name="name">Customer Invoices</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','out_invoice'),('passen_type','=','group')]</field>
    		<field name="context">{'search_default_current':1,'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale','default_passen_type':'group','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to create a customer invoice.
    			</p><p>
    				OpenERP's electronic invoicing allows to ease and fasten the
    				collection of customer payments. Your customer receives the
    				invoice by email and he can pay online and/or import it
    				in his own system.
    			</p><p>
    				The discussions with your customer are automatically displayed at
    				the bottom of each invoice.
    			</p>
    		</field>
    	</record>
    	<record id="action_cust_invoice_group_tree" model="ir.actions.act_window.view">
    		<field eval="1" name="sequence"/>
    		<field name="view_mode">tree</field>
    		<field name="view_id" ref="account.invoice_tree"/>
    		<field name="act_window_id" ref="action_cust_invoice_group"/>
    	</record>
    	<record id="action_cust_invoice_group_form" model="ir.actions.act_window.view">
    		<field eval="2" name="sequence"/>
    		<field name="view_mode">form</field>
    		<field name="view_id" ref="account.invoice_form"/>
    		<field name="act_window_id" ref="action_cust_invoice_group"/>
    	</record>
    	
    	<menuitem action="action_cust_invoice_group" id="menu_cust_invoice_group" parent="menu_cc_customers_group" sequence="1"/>
    	
    	<!-- Group Bookings -> Accounting -> Customer Refunds -->
    	<record id="action_cust_ref_group" model="ir.actions.act_window">
    		<field name="name">Customer Refunds</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','out_refund'),('passen_type','=','group')]</field>
    		<field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund','default_passen_type':'group','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to create a customer refund. 
    			</p><p>
    				A refund is a document that credits an invoice completely or
    				partially.
    			</p><p>
    				Instead of manually creating a customer refund, you
    				can generate it directly from the related customer invoice.
    			</p>
    		</field>
    	</record>    	
    	<record id="action_cust_ref_group_tree" model="ir.actions.act_window.view">
    		<field eval="1" name="sequence"/>
    		<field name="view_mode">tree</field>
    		<field name="view_id" ref="account.invoice_tree"/>
    		<field name="act_window_id" ref="action_cust_ref_group"/>
    	</record>
    	<record id="action_cust_ref_group_form" model="ir.actions.act_window.view">
    		<field eval="2" name="sequence"/>
    		<field name="view_mode">form</field>
    		<field name="view_id" ref="account.invoice_form"/>
    		<field name="act_window_id" ref="action_cust_ref_group"/>
    	</record>
    	<menuitem action="action_cust_ref_group" id="menu_cust_ref_group" parent="menu_cc_customers_group" sequence="2"/>
    	
    	<!-- Group Bookings -> Accounting -> Customer Payments -->
    	<record id="action_cust_payments_group" model="ir.actions.act_window">
    		<field name="name">Customer Payments</field>
    		<field name="res_model">account.voucher</field>
    		<field name="view_type">form</field>
    		<field name="domain">[('journal_id.type', 'in', ['bank', 'cash']), ('type','=','receipt')]</field>
    		<field name="context">{'type':'receipt','default_passen_type':'group'}</field>
    		<field name="search_view_id" ref="account_voucher.view_voucher_filter_customer_pay"/>
    		<field name="view_id" eval="False"/>
    		<field name="target">current</field>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to register a new payment. 
    			</p><p>
    				Enter the customer and the payment method and then, either
    				create manually a payment record or OpenERP will propose to you
    				automatically the reconciliation of this payment with the open
    				invoices or sales receipts.
    			</p>
    		</field>
    	</record>
    	<record id="action_cust_payments_group_tree" model="ir.actions.act_window.view">
    		<field eval="1" name="sequence"/>
    		<field name="view_mode">tree</field>
    		<field name="act_window_id" ref="action_cust_payments_group"/>
    	</record>
    	<record id="action_cust_payments_group_form" model="ir.actions.act_window.view">
    		<field eval="2" name="sequence"/>
    		<field name="view_mode">form</field>
    		<field name="view_id" ref="account_voucher.view_vendor_receipt_form"/>
    		<field name="act_window_id" ref="action_cust_payments_group"/>
    	</record>
    	
    	<menuitem action="action_cust_payments_group" icon="STOCK_JUSTIFY_FILL" sequence="3"
    		id="menu_cust_payments_group"  parent="menu_cc_customers_group"/>

    	<!-- FIT -> Accounting -> Customer Invoice -->
    	<record id="action_cust_invoice_fit" model="ir.actions.act_window">
    		<field name="name">Customer Invoices</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','out_invoice'),('passen_type','=','fit')]</field>
    		<field name="context">{'search_default_current':1,'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale','default_passen_type':'fit','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to create a customer invoice.
    			</p><p>
    				OpenERP's electronic invoicing allows to ease and fasten the
    				collection of customer payments. Your customer receives the
    				invoice by email and he can pay online and/or import it
    				in his own system.
    			</p><p>
    				The discussions with your customer are automatically displayed at
    				the bottom of each invoice.
    			</p>
    		</field>
    	</record>
    	<record id="action_cust_invoice_fit_tree" model="ir.actions.act_window.view">
    		<field eval="1" name="sequence"/>
    		<field name="view_mode">tree</field>
    		<field name="view_id" ref="account.invoice_tree"/>
    		<field name="act_window_id" ref="action_cust_invoice_fit"/>
    	</record>
    	<record id="action_cust_invoice_fit_form" model="ir.actions.act_window.view">
    		<field eval="2" name="sequence"/>
    		<field name="view_mode">form</field>
    		<field name="view_id" ref="account.invoice_form"/>
    		<field name="act_window_id" ref="action_cust_invoice_fit"/>
    	</record>
    	<menuitem action="action_cust_invoice_fit" id="menu_cust_invoice_fit" parent="menu_cc_customers_fit" sequence="1"/>

    	<!-- FIT -> Accounting -> Customer Refunds -->
    	<record id="action_cust_ref_fit" model="ir.actions.act_window">
    		<field name="name">Customer Refunds</field>
    		<field name="res_model">account.invoice</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">tree,form,calendar,graph</field>
    		<field eval="False" name="view_id"/>
    		<field name="domain">[('type','=','out_refund'),('passen_type','=','fit')]</field>
    		<field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund','default_passen_type':'fit','show_user_email':True}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_filter"/>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to create a customer refund. 
    			</p><p>
    				A refund is a document that credits an invoice completely or
    				partially.
    			</p><p>
    				Instead of manually creating a customer refund, you
    				can generate it directly from the related customer invoice.
    			</p>
    		</field>
    	</record>
    	<record id="action_cust_ref_fit_tree" model="ir.actions.act_window.view">
    		<field eval="1" name="sequence"/>
    		<field name="view_mode">tree</field>
    		<field name="view_id" ref="account.invoice_tree"/>
    		<field name="act_window_id" ref="action_cust_ref_fit"/>
    	</record>
    	<record id="action_cust_ref_fit_form" model="ir.actions.act_window.view">
    		<field eval="2" name="sequence"/>
    		<field name="view_mode">form</field>
    		<field name="view_id" ref="account.invoice_form"/>
    		<field name="act_window_id" ref="action_cust_ref_fit"/>
    	</record>
    	<menuitem action="action_cust_ref_fit" id="menu_cust_ref_fit" parent="menu_cc_customers_fit" sequence="2"/>
    	
    	<!-- FIT -> Accounting -> Customer Payments -->
    	<record id="action_cust_payments_fit" model="ir.actions.act_window">
    		<field name="name">Customer Payments</field>
    		<field name="res_model">account.voucher</field>
    		<field name="view_type">form</field>
    		<field name="domain">[('journal_id.type', 'in', ['bank', 'cash']), ('type','=','receipt')]</field>
    		<field name="context">{'type':'receipt','default_passen_type':'fit'}</field>
    		<field name="search_view_id" ref="account_voucher.view_voucher_filter_customer_pay"/>
    		<field name="view_id" eval="False"/>
    		<field name="target">current</field>
    		<field name="help" type="html">
    			<p class="oe_view_nocontent_create">
    				Click to register a new payment. 
    			</p><p>
    				Enter the customer and the payment method and then, either
    				create manually a payment record or OpenERP will propose to you
    				automatically the reconciliation of this payment with the open
    				invoices or sales receipts.
    			</p>
    		</field>
    	</record>
    	<record id="action_cust_payments_fit_tree" model="ir.actions.act_window.view">
    		<field eval="1" name="sequence"/>
    		<field name="view_mode">tree</field>
    		<field name="act_window_id" ref="action_cust_payments_fit"/>
    	</record>
    	<record id="action_cust_payments_fit_form" model="ir.actions.act_window.view">
    		<field eval="2" name="sequence"/>
    		<field name="view_mode">form</field>
    		<field name="view_id" ref="account_voucher.view_vendor_receipt_form"/>
    		<field name="act_window_id" ref="action_cust_payments_fit"/>
    	</record>
    	
    	<menuitem action="action_cust_payments_fit" icon="STOCK_JUSTIFY_FILL" sequence="3"
    		id="menu_cust_payments_fit"  parent="menu_cc_customers_fit"/>
    	
    	
<!-- 	    Overriden: Portal Invoice		     --> 

		<record id="portal_sale.portal_action_invoices" model="ir.actions.act_window">
            <field name="name">Invoices</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('type','in',['out_invoice','in_invoice']),('state','in',('open','paid'))]</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help">We haven't sent you any invoice.</field>
        </record>

        <record id="portal_sale.portal_action_invoices_tree_spec" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="portal_sale.portal_action_invoices"/>
            <field name="view_id" ref="account.invoice_tree"/>
            <field name="domain">[('type','in',['out_invoice','in_invoice']),('state','in',('open','paid'))]</field>
            <field name="view_mode">tree</field>
            <field name="sequence" eval="0"/>
         </record> 
    
         
<!-- 	    Portal-Client: Invoice		     --> 
		<record id="portal_action_client_invoices" model="ir.actions.act_window">
            <field name="name">Invoices</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type','=','out_invoice'),('state','in',('open','paid'))]</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help">We haven't sent you any invoice.</field>
        </record>

        <record id="portal_client_action_invoices_tree" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="portal_action_client_invoices"/>
            <field name="view_id" ref="account.invoice_tree"/>
            <field name="domain">[('type','=','out_invoice'),('state','in',('open','paid'))]</field>
            <field name="view_mode">tree</field>
            <field name="sequence" eval="0"/>
         </record> 
         
         <record id="portal_client_action_invoices_form" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="portal_action_client_invoices"/>
            <field name="view_id" ref="account.invoice_form"/>
            <field name="view_mode">form</field>
            <field name="sequence" eval="0"/>
         </record>        
	    <menuitem name="Invoices" id="portal_client_invoices" parent="portal.portal_orders"
            action="portal_action_client_invoices" sequence="30" groups='Trabacus_Capitalcentric.cc_client'/>
            
          <!-- Account_voucher - Invoice -->  
         <record id="cc_view_invoice_customer" model="ir.ui.view">
            <field name="name">cc_view_invoice_customer</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account_voucher.view_invoice_customer"/>
            <field name="arch" type="xml">
                   <button string="Register Payment" position='attributes'>
                   		<attribute name='groups'>Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo</attribute>
                   </button>	
               
            </field>
        </record>
    	
    	<!-- Account Cancel-Invoice Form -->
    	
    	<record id="cc_invoice_form_cancel" model="ir.ui.view">
    		<field name="name">cc.invoice.form.cancel</field>
    		<field name="model">account.invoice</field>
    		<field name="inherit_id" ref="account_cancel.invoice_form_cancel_inherit"/>
    		<field name="arch" type="xml">
    			<xpath expr="//button[@name='invoice_cancel']" position="replace">
    				<button name="invoice_cancel" states="draft,proforma2,sale,open" string="Cancel Invoice" groups="Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo"/>
    			</xpath>
    		</field>
    	</record>
    	
    	<!-- Account Cancel-Supplier Invoice Form --> 
     	 <record id="cc_supplier_form_cancel" model="ir.ui.view">
    		<field name="name">cc_supplier_form_cancel</field>
    		<field name="model">account.invoice</field>
    		<field name="inherit_id" ref="account_cancel.invoice_supplier_cancel_form_inherit"/>
    		<field name="arch" type="xml">
    			<xpath expr="//button[@name='invoice_cancel']" position="replace">
    				<button name="invoice_cancel" states="draft,proforma2,sale,open" string="Cancel Invoice" groups="Trabacus_Capitalcentric.cc_admin,Trabacus_Capitalcentric.cc_bo"/>
    			</xpath>
    		</field>
    	</record>
    	
    	<!-- Account Voucher - Sales Receipt -->
    	<record id="cc_sale_receipt_form" model="ir.ui.view">
    		<field name="name">cc_sale_receipt_form</field>
    		<field name="model">account.voucher</field>
    		<field name="inherit_id" ref="account_voucher.view_sale_receipt_form"/>
    		<field name="arch" type="xml">
    			<field name="partner_id" position="attributes">
    				<attribute name="domain">[]</attribute>
    				<attribute name="options">{'limit':500}</attribute>
    			</field>
    		</field>
    	</record>
    	
    	<!-- Account Voucher - Purchase Receipt -->
    	<record id="cc_purchase_receipt_form" model="ir.ui.view">
    		<field name="name">cc_purchase_receipt_form</field>
    		<field name="model">account.voucher</field>
    		<field name="inherit_id" ref="account_voucher.view_purchase_receipt_form"/>
    		<field name="arch" type="xml">
    			<field name="partner_id" position="attributes">
    				<attribute name="domain">[]</attribute>
    				<attribute name="options">{'limit':500}</attribute>
    			</field>
    		</field>
    	</record>
    	
    	<!-- Account Voucher - Customer Payment -->
    	<record id="cc_customer_payment_form" model="ir.ui.view">
    		<field name="name">cc_customer_payment_form</field>
    		<field name="model">account.voucher</field>
    		<field name="inherit_id" ref="account_voucher.view_vendor_receipt_form"/>
    		<field name="arch" type="xml">
    			<field name="partner_id" position="attributes">
    				<attribute name="domain">[('type','!=','restaurant')]</attribute>
    				<attribute name="options">{'limit':500}</attribute>
    			</field>
    			<field name="company_id" position="after">
    				<field name="passen_type" invisible="1"/>
    			</field>
    			<button name="action_cancel_draft" type="object" states="cancel" string="Set to Draft" position="after">
    				<button string="Send Mail"
    					name="%(mail.action_email_compose_message_wizard)d"
    					type="action" class="oe_highlight"/>
    				<button name="print_voucher" string="Print Receipt" type='object' states="draft,posted" class="oe_highlight"/>
    			</button>
    		</field>
    	</record>
    	
    	<!-- Account Voucher - Supplier Payment -->
    	<record id="cc_supplier_payment_form" model="ir.ui.view">
    		<field name="name">cc_supplier_payment_form</field>
    		<field name="model">account.voucher</field>
    		<field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
    		<field name="arch" type="xml">
    			<field name="partner_id" position="attributes">
    				<attribute name="domain">[('type','!=','restaurant')]</attribute>
    				<attribute name="options">{'limit':500}</attribute>
    				<field name="company_id" position="after">
    					<field name="passen_type" invisible="1"/>
    				</field>
    			</field>
    			<button name="action_cancel_draft" type="object" states="cancel" string="Set to Draft" position="after">
    				<button string="Send Mail"
    					name="%(mail.action_email_compose_message_wizard)d"
    					type="action" class="oe_highlight"/>
    				<button name="print_voucher" string="Print Remittance Advice" type='object' states="draft,posted" class="oe_highlight"/>
    			</button>
    		</field>
    	</record> 	
    	
    	
    	<!-- Accounts -->
    	<record id="cc_view_account_report_graph" model="ir.ui.view">
    		<field name="name">cc_view_account_report_graph</field>
    		<field name="model">account.invoice.report</field>
    		<field name="inherit_id" ref="account.view_account_invoice_report_graph"/>
    		<field name="arch" type="xml">
    			<field name="price_total" position="after">
    				<field name="amount_tax" type="measure"/>
    				<field name="amount_total" type="measure"/>
    				<field name="residual" type="measure"/>
    			</field>    			
    			<field name="nbr" position="replace"/>
    		</field>
    	</record> 
    	
    	<record id="cc_view_account_report_search" model="ir.ui.view">
    		<field name="name">cc_view_account_report_search</field>
    		<field name="model">account.invoice.report</field>
    		<field name="inherit_id" ref="account.view_account_invoice_report_search"/>
    		<field name="arch" type="xml">
    			<filter string="Type" icon="terp-stock_symbol-selection" context="{'group_by':'type'}" position="after">
    				<filter string="Service Type" name='ccservice_type' icon="terp-stock_symbol-selection" context="{'group_by':'service_type','residual_invisible':True}"/>
    			</filter>
    		</field>
    	</record>
    	
    	<record id="account.action_account_invoice_report_all" model="ir.actions.act_window">
    		<field name="name">Invoices Analysis</field>
    		<field name="res_model">account.invoice.report</field>
    		<field name="view_type">form</field>
    		<field name="view_mode">graph</field>
    		<field name="context">{'search_default_period':1,'search_default_current':1, 'search_default_year': 1, 'search_default_ccservice_type':1, 'search_default_customer':1, 'group_by':[], 'group_by_no_leaf':1,}</field>
    		<field name="search_view_id" ref="account.view_account_invoice_report_search"/>
    		<field name="help">From this report, you can have an overview of the amount invoiced to your customer. The tool search can also be used to personalise your Invoices reports and so, match this analysis to your needs.</field>
    		
    	</record>
    	
    	<!-- Accounts -->
    	<record id="cc_view_account_form" model="ir.ui.view">
    		<field name="name">cc_view_account_form</field>
    		<field name="model">account.account</field>
    		<field name="inherit_id" ref="account.view_account_form"/>
    		<field name="arch" type="xml">
    			<field name="balance" position="after">
    				<field name="cc_type"/>
    			</field>
    		</field>
    	</record> 

		<!--         Inherit: Period Form    -->
    	<record id="cc_view_account_period_form" model="ir.ui.view">
	            <field name="name">cc_view_account_period_form_form</field>
	            <field name="model">account.period</field>
	            <field name="inherit_id" ref="account.view_account_period_form"/>
	            <field name="arch" type="xml">
                 <xpath expr="//header/button[@name='action_draft']" position="after">
		            	<button name="close_vat_period" string="Close VAT Period" type="object"
                        attrs="{'invisible':[('vat_status','!=','open')]}" context="{'close':True}"/>
                     	<button name="close_vat_period" string="Re-open VAT Period" type="object"
                        attrs="{'invisible':[('vat_status','!=','close')]}" context="{'reopen':True}"/>
		         </xpath>

                 <xpath expr="//form/sheet/group/group/field[@name='special']" position="after">
		            	<field name="vat_status" readonly="1"/>
		         </xpath>
                </field>
    	</record> 
    	
	</data>
</openerp>