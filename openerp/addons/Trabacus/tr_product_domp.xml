<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
        
        
<!--	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
       			Product: Domestic Package 
  		^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^	
--> 


        <record id="view_prod_ftlines_tree" model="ir.ui.view">
            <field name="name">view_prod_ftlines_tree</field>
            <field name="model">tr.prod.flight.lines</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Flight Lines">
                    <field name="airline_id"/> 
                    <field name="source"/> 
                    <field name="dest"/> 
                    <field name="ft_num"/> 
                    <field name="ft_class"/> 
                </tree>
            </field>
        </record>
        
        <record id="view_prod_ftlines_form" model="ir.ui.view">
            <field name="name">view_prod_ftlines_form</field>
            <field name="model">tr.prod.flight.lines</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Flight Lines">
                    <field name="airline_id"/> 
                    <field name="source"/> 
                    <field name="dest"/> 
                    <field name="ft_num"/> 
                    <field name="ft_class"/> 
                    <newline/>
                    <group colspan="2" col="4">
                        <group colspan="1" col="2">
                            <field name="a_basic"/> 
                            <field name="a_wopsf"/> 
                            <field name="a_yq"/>
                            <field name="a_in"/>
                            <field name="a_other"/>
                            <field name="a_tptax_perc"/>
                            <field name="a_tptax"/>
                            <field name="a_markup"/>
                            <field name="a_servicechrg"/>
                        </group>
                        <group colspan="1" col="2">
                            <field name="a_tac_basic"/> 
                            <field name="a_tac_wopsf"/> 
                            <field name="a_tac_yq"/> 
                            <field name="a_tac_in"/>
                            <field name="a_tac_other"/>
                            <field name="a_tac_tptax"/>
                            <field name="a_tac_perc" string="TAC (%%)"/>
                            <field name="a_tac"/>
                            <field name="a_tds_perc"/>
                            <field name="a_tds"/>
                            <field name="a_total"/>
                        </group>
                    </group>
                </form>
            </field>
        </record>

<!--  TODO: detele this... added for testing 
-->
        <record id="act_prod_sector_lines" model="ir.actions.act_window">
            <field name="name">sector</field>
            <field name="res_model">tr.prod.flight.lines</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_ftopt_id': [active_id], 'default_ftopt_id': active_id}</field>
            <field name="domain">[('ftopt_id', '=', active_id)]</field>
        </record>


<!-- *********************************	
   		 Opt Flight
	 *********************************-->
        
        <record id="view_prod_optflight_tree" model="ir.ui.view">
            <field name="name">view_prod_optflight_tree</field>
            <field name="model">tr.prod.opt.flight</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Hotel Lines">
                    <field name="name"/> 
                    <field name="type"/> 
                </tree>
            </field>
        </record>
        
        <record id="view_prod_optflight_form" model="ir.ui.view">
            <field name="name">view_prod_optflight_form</field>
            <field name="model">tr.prod.opt.flight</field>
            <field name="type">form</field> 
            <field name="arch" type="xml">
                <form string="Flight" version="7.0">
                    <sheet>
                        <field name="image" widget="image" class="oe_avatar oe_left"/>
                        <div class="oe_title">
                            <div class="oe_edit_only">
                                <label for="name"/>
                            </div>
                            <field name="name"/>
                        </div> 
                        <newline/>
                        <field name="type"/>
                        <field name="product_ids" colspan="2" widget="many2many_tags" attrs="{'invisible':[('type','!=','ft_detail')]}"/>
                        <button name="populate_sectorlines" string="Populate Lines" type="object" attrs="{'invisible':[('type','!=','ft_detail')]}"/>
                        <newline/>
                        <group colspan="2" col="6" attrs="{'invisible':[('type','!=','ft_smry')]}" >
                            <field name="smry_adult"/>
                            <field name="smry_child"/> 
                        </group>
                        <field colspan="4" name="sector_ids" nolabel="1" widget="one2many_list" attrs="{'invisible':[('type','!=','ft_detail')]}" />
                        <field colspan="4" name="members" nolabel="1" />
                    </sheet>
                </form>
            </field>
        </record>
        
        
        <record id="product_tree_view_trprodDompack" model="ir.ui.view">
            <field name="name">product_tree_view_trprodDompack</field>
            <field name="model">product.product</field>
            <field name="type">tree</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Products">
                    <field name="default_code"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        
        <record id="product_form_view_trprod_Dompack" model="ir.ui.view">
            <field name="name">product_form_view_trprod_Dompack</field>
            <field name="model">product.product</field>
            <field name="type">form</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <form string="Products" version="7.0"> 
                    <sheet>
                        <field name="image_medium" widget="image" class="oe_avatar oe_left"/>
                        <div class="oe_title">
                            <div class="oe_edit_only">
                                <label for="name" string="Description"/>
                            </div>
                            <h1>
                                <field name="name"/>
                            </h1>
                            <label for="default_code" class="oe_edit_only"/>
                            <h2><field name="default_code"/></h2>
                        </div>
                        <group colspan="2" col="4">
                            <field name="currency_id"/> <field name="company_id" /> 
                            <field name="travel_type"  invisible="1" /> 
                        </group>
                        <notebook colspan="4"> 
                            <page string="Flight">
                                
                                <field colspan="4" name="flight_opt_ids" mode="kanban" nolabel="1" widget="one2many_list"  >
                                    
                                    <kanban version="7.0" class="oe_background_grey">
                                        <field name="name"/>
                                        <field name="sector_ids"/>
                                        <field name="members"/>
                                        <templates>
                                            <t t-name="kanban-box"> 
                                                <div class="oe_kanban_content"> 
                                                    <a type="open">
                                                        <img t-att-src="kanban_image('tr.prod.opt.flight', 'image', record.id.value)"  width="100" height="100" class="oe_kanban_avatar"/>                                                    
                                                    </a> 
                                                 <!--   <div class="oe_kanban_project_list">
                                                        <t t-foreach="record.sector_ids.raw_value.slice(0,11)" t-as="sector_ids"> 
                                                            <span t-if="record.name.raw_value" t-att-data-member_id="sector_ids"><field name="sector_ids"/>  </span>
                                                            
                                                        </t>
                                                    </div> --> 
                                                    
                                                    
                                                    <div class="oe_kanban_trabacus_list">
                                                        <a t-foreach="record.sector_ids.raw_value.slice(0,11)" name="%(act_prod_sector_lines)d" type="action" style="margin-right: 10px"> 
                                                            <span t-if="record.name.raw_value" t-att-data-member_id="sector_ids"><field name="sector_ids"/>  </span>
                                                        </a>
                                                    </div>
                                                    
                                                    <div class="oe_kanban_project_avatars">
                                                        <t t-foreach="record.members.raw_value.slice(0,11)" t-as="member">
                                                            <img t-att-src="kanban_image('res.users', 'image_small', member)" t-att-data-member_id="member"/>
                                                        </t>
                                                    </div>
                                                    
                                                    
                                                    
                                             <!--       <div t-foreach="record.sector_ids.raw_value.slice(0,11)" t-as="sector" data-publish="">
                                                        <div class="media-body" style="min-height: 34px;">
                                                            <p t-field="record.sector_ids.source.raw_value"/>
                                                            <p t-field="record.sector_ids.dest.raw_value"/>
                                                        </div>
                                                    </div> -->
                                                    
                                                </div> 
                                            </t> 
                                        </templates>
                                    </kanban>
                                </field>
                            </page>
                            <page string="Accounting"> 
                                <group name="properties">
                                    <group>
                                        <field name="property_account_income" domain="[('type','=','other')]" />
                                        <field name="taxes_id" colspan="2" attrs="{'readonly':[('sale_ok','=',0)]}" widget="many2many_tags"/>
                                    </group>
                                    <group>
                                        <field name="property_account_expense" domain="[('type','=','other')]"/>
                                        <field name="supplier_taxes_id" colspan="2" widget="many2many_tags"/>
                                    </group>
                                </group> 
                                <field name="sale_ok" invisible="1"/>
                                <field mode="tree" name='taxon_ids' nolabel="1" colspan="4" >
	    						<tree editable='top'>
	    							<field name="company_id"/>
									<field name="tax_basic"/>									
								</tree>
							</field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        
        
        <record id="action_trprod_dompack" model="ir.actions.act_window">
            <field name="name">Products - Domestic Holidays</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('travel_type','=','dom_package')]</field>
            <field name="context">{"default_travel_type":'dom_package',"travel_type":'dom_intpackage'}</field>
            <field name="view_id" ref="product_tree_view_trprodDompack" />
        </record>
        
        <record id="action_trprod_dompack_tree" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="product_tree_view_trprodDompack"/>
            <field name="act_window_id" ref="action_trprod_dompack"/>
        </record>
        
        <record id="action_trprod_dompack_form" model="ir.actions.act_window.view">
            <field eval="20" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="product_form_view_trprod_Dompack"/>
            <field name="act_window_id" ref="action_trprod_dompack"/>
        </record>
        
        <menuitem action="action_trprod_dompack" id="menu_action_trprod_pack" name="Domestic Holiday" parent="menu_product_service" sequence="1" groups="Trabacus.group_trproduct_user"/>
        
        
    </data>
</openerp>