<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
              
         
        <menuitem name="Accounting" id="menu_trabacus_accounting" sequence="5" 
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
        <menuitem name="Invoices and Refunds" id="menu_trabacus_invoice_refunds" sequence="1" 
            parent='menu_trabacus_accounting' groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>

        <menuitem name="Payments and Receipts" id="menu_trabacus_payment_receipts" sequence="2" 
            parent='menu_trabacus_accounting' groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
        <menuitem action="account_voucher.action_vendor_receipt" icon="STOCK_JUSTIFY_FILL" sequence="11"
            id="account_voucher.menu_action_vendor_receipt"  name="Customer Receipts" parent="menu_trabacus_payment_receipts"/>
        
        <menuitem action="account_voucher.action_vendor_payment" icon="STOCK_JUSTIFY_FILL" sequence="12"
            id="account_voucher.menu_action_vendor_payment"  parent="menu_trabacus_payment_receipts"/>
        
        <menuitem name="Customer Invoice" id="menu_tr_custinvoice" parent='menu_trabacus_invoice_refunds' sequence="0"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
        <menuitem name="Credit Note" id="menu_tr_creditnote" parent='menu_trabacus_invoice_refunds' sequence="1"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
            
         <menuitem action="account.action_invoice_tree2" id="account.menu_action_invoice_tree2" parent="menu_trabacus_invoice_refunds" sequence="2"
             groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
         
         <menuitem action="account.action_invoice_tree4" id="account.menu_action_invoice_tree4" parent="menu_trabacus_invoice_refunds" sequence="3"
             groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
             
             	
<!--        Moving Standard Acccounting Menus To Trabacus Accounting Menu     -->
        
        <menuitem id="account.menu_finance_bank_and_cash" name="Bank and Cash" parent="menu_trabacus_accounting" sequence="4" groups="account.group_account_user,account.group_account_manager"/>
        
        <menuitem id="account.menu_finance_entries" name="Journal Entries" parent="menu_trabacus_accounting" sequence="5" groups="account.group_account_user,account.group_account_manager"/>
        
        <menuitem id="account.menu_finance_charts" name="Charts" parent="menu_trabacus_accounting" groups="account.group_account_user" sequence="6"/>
        
        <menuitem id="account.menu_finance_periodical_processing" name="Periodic Processing" parent="menu_trabacus_accounting" sequence="13" groups="account.group_account_user,account.group_account_manager"/>

        <menuitem id="account.menu_finance_reports" name="Reporting" parent="menu_trabacus_accounting" sequence="14" groups="account.group_account_user,account.group_account_manager"/>

        <menuitem id="account.menu_finance_configuration" name="Configuration" parent="menu_trabacus_accounting" sequence="15" groups="Trabacus.group_traccount_manager,account.group_account_manager"/>
        
<!--
	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
				Inherited Search View  
				
	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
-->

		 <record id="invoice_search_view_tr" model="ir.ui.view">
            <field name="name">invoice_search_view_tr</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="model">account.invoice</field>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='partner_id']" position="after">
            		<field name="lead_id" string="Lead No."/>
            	</xpath>
            </field>
        </record> 
        
<!--	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
       			Overridden: Invoice (Tree)
  		^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
-->         
        <record id="account.invoice_tree" model="ir.ui.view">
            <field name="name">account.invoice.tree</field>
            <field name="model">account.invoice</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';black:state in ('proforma','proforma2','open');gray:state in ('cancel', 'order_cancel')" 
                      fonts="bold:state=='quotation'" string="Invoice">
                    <field name="partner_id"/>
                    <field name="ln_paxname" invisible="not context.get('flight_travel_type', False)"/>
                    <field name="ln_ticketno" invisible="not context.get('flight_travel_type', False)"/>
                    <field name="ln_pnr" invisible="not context.get('flight_travel_type', False)"/>
                    <field name="ln_sector" invisible="not context.get('flight_travel_type', False)"/>
                    <field name="currency_id"/>
                    <field name="amount_total" sum="Total Amount"/>
                    <field name="residual" sum="Residual Amount"/>
                    <field name="create_date" widget='date' invisible="not context.get('sale_view',False)"/>
                    <field name="number" invisible="context.get('sale_view',False)"/>
                    <field name="date_invoice" invisible="context.get('sale_view',False)"/>
                    <field name="date_due"/>
                    <field name="state"/>
                    <field name="user_id"/>
                    <field name="consultant_id"/>
                    <field name="lead_id"/>
                    <field name="amount_untaxed" sum="Untaxed Amount" invisible="1"/>
                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                </tree>
            </field>
        </record>
        
<!-- 
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
         	 		Account Invoice Line Inherited - Tree
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ -->
     
      <record id="view_invoice_line_tree_tr" model="ir.ui.view">
            <field name="name">account.invoice.line.tree.tr</field>
            <field name="model">account.invoice.line</field>
            <field name="inherit_id" ref="account.view_invoice_line_tree"/>
            <field name="arch" type="xml">
                	<xpath expr="//field[@name='name']" position="before">
                		<field name = "tpartner_id"/>
                	</xpath>
                	<xpath expr="//field[@name='account_id']" position="attributes">
                		<attribute name = "invisible">1</attribute>
                	</xpath> 
            </field>
        </record>
        
       
     
<!-- 
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
         	 		Account Invoice Line 
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ -->
        
        <record id="view_invoice_line_form_tr" model="ir.ui.view">
            <field name="name">view.invoice.line.form.tr</field>
            <field name="model">account.invoice.line</field>
            <field name="inherit_id" ref="account.view_invoice_line_form"/>
            <field name="arch" type="xml">
            	<form string="Invoice Line" version="7.0" position="replace">
                <form string="Miscellaneous" version="7.0" >
                    
                    <group colspan="3" col="6">
                        <field name="tpartner_id" required="1" context="{'search_default_supplier':1,'default_supplier':1,'default_customer':0}"/>
                        <field name="product_id" />
                        <field name="account_id" invisible="1"/>
                        <newline/>
                        <field name="name" colspan="4" />
                        <newline/>
                        <field name="quantity" 			on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="basic" 			on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="other" 			on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="tac" 				on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="tds" 				on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="tds1" 				on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="markup" 			on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="discount" 			on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="servicechrg" 		on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)"/>
                        <field name="cancel_markup" 	on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)" invisible="not context.get('credit_view')"/>
                        <field name="cancel_charges" 	on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)" invisible="not context.get('credit_view')"/>
                        <field name="cancel_service" 	on_change="onchange_Misc_total(quantity, basic, other, tac, tds, tds1,  markup, servicechrg, discount, cancel_markup, cancel_charges, cancel_service)" invisible="not context.get('credit_view')"/>
                        <field name="price_unit" invisible="1"/>
                        <field name="purchase_amt" invisible="1"/>
                        <field name="subtotal"/>
                    </group>
                    <newline/>
                    <u><separator string="Taxes"/></u>
                    <newline/>
                    <group colspan="3" col="6">
                        <field name="tax_basic"/>
                        <field name="tax_other"/>
                        <field name="tax_tac"/>
                        <field name="tax_tds"/>
                        <field name="tax_tds1"/>
                        <field name="tax_mark"/>
                        <field name="tax_servicechrg"/>
                        <field name="invoice_line_tax_id" widget="many2many_tags" context="{'type':parent.type}"
                            domain="[('parent_id','=',False),('company_id', '=', parent.company_id)]"/>
                    </group>
                </form>
                </form>
            </field>
        </record>	
        
<!--	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
       			Invoice: Customer Invoice / Sale Order 
  		^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
--> 
       <record id="view_invoice_form" model="ir.ui.view">
            <field name="name">view.invoice.form</field>
            <field name="model">account.invoice</field>
            <field name="arch" type="xml">
                <form string="Invoice" version="7.0">
                    <header>
                        <button name="button_order_confirm" states="quotation" string="Confirm Order"  type="object" class="oe_highlight" groups="base.group_user"/>
                        <button name="action_invoice_sent" type="object" string="Send by Email" attrs="{'invisible':['|',('sent','=',True), ('state', '=', 'quotation')]}" groups="base.group_user"/>
                        <button name="action_invoice_sent" type="object" string="Send by Email" attrs="{'invisible':['|',('sent','=',False), ('state', '=', 'quotation')]}" groups="base.group_user"/>
                        <button name="print_invoice" string="Print" type="object" attrs="{'invisible':['|',('sent','=',True), ('state', 'in', ('quotation','draft'))]}" groups="base.group_user"/>
                        <button name="print_invoice" string="Print Invoice" type="object" attrs="{'invisible':['|',('sent','=',False), ('state', 'in', ('quotation','draft'))]}" groups="base.group_user"/>
                        <button name="print_voucher" string="Print Voucher" type="object"  attrs="{'invisible':['|',('state', 'not in', ('open','paid')),('travel_type','in',('dom_flight','int_flight','visa','insurance','railway'))]}" groups="base.group_user"/>
                        <button name="invoice_open" states="draft" string="Validate" class="oe_highlight" groups="base.group_user" invisible="context.get('sale_view',False)"/>
                        <button name="invoice_open" states="proforma2" string="Validate" groups="base.group_user" invisible="context.get('sale_view',False)"/>
                        <button name="invoice_pay_customer" type="object" string="Register Payment"
                            attrs="{'invisible': ['|', ('state','!=','open'), ('sent','=',True)]}" invisible="context.get('sale_view',False)" />
                        <button name="invoice_pay_customer" type="object" string="Register Payment"
                            attrs="{'invisible': ['|', ('state','!=','open'), ('sent','=',False)]}" invisible="context.get('sale_view',False)" class="oe_highlight"/>
                        <!--<button name="invoice_proforma2" states="draft" string="PRO-FORMA" groups="account.group_proforma_invoices"/>-->
                        <button name="%(account.action_account_invoice_refund)d" type='action' string='Refund Invoice' context="{'invoice_id':active_id}"
                            attrs="{'invisible': ['|', ('type','=','out_refund'), ('state','in',('quotation','draft','order_cancel','cancel'))]}" groups="base.group_user" />
                        <button name="invoice_cancel" states="draft,proforma2,open" string="Cancel Invoice" invisible="context.get('sale_view',False)"/>
                        <button name="action_cancel_draft" states="cancel" string="Reset to Draft" type="object" groups="base.group_user"/>
                        <button name="button_order_cancel" states="quotation,draft" string="Cancel Order" type="object" />
                        <button name="button_set_quotation" states="order_cancel" string="Reset to New" type="object"/>
                        <button name='%(account.action_account_state_open)d' type='action' string='Re-Open' groups="account.group_account_invoice" attrs="{'invisible':['|', ('state','&lt;&gt;','paid'), ('reconciled', '=', True)]}" help="This button only appears when the state of the invoice is 'paid' (showing that it has been fully reconciled) and auto-computed boolean 'reconciled' is False (depicting that it's not the case anymore). In other words, the invoice has been dereconciled and it does not fit anymore the 'paid' state. You should press this button to re-open it and let it continue its normal process after having resolved the eventual exceptions it may have created."/>
                        <field name="state" widget="statusbar" nolabel="1" statusbar_visible="quotation,draft,open,paid" statusbar_colors='{"proforma":"blue","proforma2":"blue"}'/>
                    </header>
                    <sheet string="Invoice">
                        <h1>
                            <label string="Quotation " attrs="{'invisible': ['|',('state','not in',('quotation',)), ('type','&lt;&gt;','out_invoice')]}"/>
                            <label string="Draft Invoice " attrs="{'invisible': ['|',('state','not in',('draft',)), ('type','&lt;&gt;','out_invoice')]}"/>
                            <label string="Draft Credit Note " attrs="{'invisible': ['|',('state','not in',('draft',)), ('type','&lt;&gt;','out_refund')]}"/>
                            <label string="Pro Forma Invoice " attrs="{'invisible': [('state','not in',('proforma','proforma2'))]}"/>
                            <label string="Invoice " attrs="{'invisible': ['|',('state','in',('draft','proforma','proforma2')), ('type','&lt;&gt;','out_invoice')]}"/>
                            <label string="Credit Note " attrs="{'invisible': ['|',('state','in',('draft','proforma','proforma2')), ('type','&lt;&gt;','out_refund')]}"/>
                            <field name="number" readonly="1" class="oe_inline"/>
                        </h1>
                        <field name="type" invisible="1"/>
                        <field name="travel_type" invisible="1"/>
                        <group>
                            <group>
                            	<group colspan="2" col="4">
	                                <field string="Customer" name="partner_id" required="1"
	                                    on_change="onchange_partner_id(type,partner_id,date_invoice,payment_term, partner_bank_id,company_id)"
	                                    groups="base.group_user" context="{'search_default_supplier':1, 'show_address': 1}"
	                                    options='{"always_reload": True}'
	                                    domain="[('customer', '=', True)]" colspan="3"/>
	                                <button name="button_update" icon="gtk-refresh" type="object" help="Update Customer Discount" 
	                                    attrs="{'invisible':[('type', 'not in', ('out_invoice'))]}"/>
                            	</group>
                                <field name="date_due"  attrs="{'invisible': [('state','=','quotation')]}"/>
                                <field name="user_id"/>
                                <field name="consultant_id" domain="[('id','!=',1)]"/>
                                <field name="project_code"/>
                                <field name="auth_ref"/>
                                <field name="psr_date" attrs="{'invisible':[('travel_type', 'not in', ('dom_flight', 'int_flight'))]}"/>
                                
                            </group>
                            <group>
                                <field name="lead_id" on_change="onchange_leadid(lead_id, context)" placeholder="Lead No..." context="{'showinfo':True}"/>
                                <field name="create_date" readonly="1" widget="date"/>
                                <field name="date_invoice"  attrs="{'invisible': [('state','=','quotation')]}" on_change="onchange_invoicedate(date_invoice, context)" />
                                <field name="journal_id" invisible="1"
                                    on_change="onchange_journal_id(journal_id, context)" widget="selection"/>
                                <field domain="[('company_id', '=', company_id),('type','=', 'receivable')]"
                                    name="account_id" groups="account.group_account_user" required="1"/>
                                <label for="currency_id" />
                                <div>
                                    <field name="currency_id" class="oe_inline"/>
                                </div>
                                <field name="is_ticket" readonly="1" attrs="{'invisible':[('travel_type', 'not in', ('dom_flight', 'int_flight'))]}"/>
                                <field name="paxtype"/>
                                <field name="purpose"/><field name="account_analytic_id"/>
                            </group>
                        </group>
                        <field name="sent" invisible="1"/>
                        <notebook colspan="4">
                            <page string="Lines">
                                <field name="insurance_ids" attrs="{'invisible':[('travel_type', '!=', 'insurance')]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type}"/>
                                <field name="flight_ids" attrs="{'invisible':[('travel_type', 'not in', ('dom_flight', 'int_flight'))]}" nolabel="1" widget="one2many_list" 
                                       context="{'type': type, 'travel_type':travel_type, 'partner_id':partner_id, 'credit_view':context.get('credit_view'), 'invoice_id': active_id}" />
                                <field name="visa_ids" attrs="{'invisible':[('travel_type', '!=', 'visa')]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type}"/>
                                <field name="cruise_ids" attrs="{'invisible':[('travel_type', '!=', 'cruise')]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type}"/>
                                <field name="car_ids" attrs="{'invisible':[('travel_type', '!=', 'car')]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type}"/>
                                <field name="railway_ids" attrs="{'invisible':[('travel_type', '!=', 'railway')]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type}"/>
                                <field name="hotel_ids" attrs="{'invisible':[('travel_type', 'not in', ('dom_hotel','int_hotel'))]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type, 'partner_id':partner_id}"/>
                                <field name="activity_ids" attrs="{'invisible':[('travel_type', '!=', 'activity')]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type, 'invoice_id': active_id}"/>
                                <field name="addon_ids" attrs="{'invisible':[('travel_type', '!=', 'add_on')]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type}"/>
                                <field name="invoice_line" attrs="{'invisible':[('travel_type', '!=', 'direct')]}" nolabel="1" widget="one2many_list" context="{'type': type, 'credit_view':context.get('credit_view'), 'travel_type':travel_type}"/>
                                
                                <group class="oe_subtotal_footer oe_right">
                                    <field name="amount_untaxed" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    <div>
                                        <label for="amount_tax"/>
                                        <button name="button_reset_taxes" states="quotation,draft,proforma2"
                                            string="(update)" class="oe_link oe_edit_only"
                                            type="object" help="Recompute taxes and total"/>
                                    </div>
                                    <field name="amount_tax" nolabel="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    <field name="amount_total" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    <field name="residual" groups="account.group_account_user" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                    <field name="amount_profit" widget="monetary" options="{'currency_field': 'currency_id'}" />
                                    <field name="reconciled" invisible="1"/>
                                </group>
                                <div style="width: 50%%">
                                    <field name="tax_line" readonly="1">
                                        <tree editable="bottom" string="Taxes">
                                            <field name="name"/>
                                            <field name="account_id" groups="account.group_account_user" />
                                            <field name="base" on_change="base_change(base,parent.currency_id,parent.company_id,parent.date_invoice)" readonly="1"/>
                                            <field name="amount" on_change="amount_change(amount,parent.currency_id,parent.company_id,parent.date_invoice)"/>
                                            <field invisible="True" name="base_amount"/>
                                            <field invisible="True" name="tax_amount"/>
                                            <field name="factor_base" invisible="True"/>
                                            <field name="factor_tax" invisible="True"/>
                                        </tree>
                                    </field>
                                </div>
                                <group>
                                    <field name="payment_term" class="oe_inline"/>
                                </group>
                                <div class="oe_clear"> 
                                    <label for="comment"/> 
                                </div> 
                                <field name="comment" class="oe_inline" placeholder="Additional notes..."/> 
                                <div class="oe_clear"> 
                                    <label for="terms_condition"/> 
                                </div> 
                                <field name="terms_condition" class="oe_inline" placeholder="Terms and Condition..."/>
                                
                            </page>
                            <page string="Other Info">
                                <group col="4">
                                    <group>
                                        <!--<field name="company_id" on_change="onchange_company_id(company_id,partner_id,type,invoice_line,currency_id)" widget="selection" groups="base.group_multi_company"/> -->
                                        <field name="company_id"  widget="selection" groups="base.group_multi_company"/>
                                        <field domain="[('partner_id.ref_companies', 'in', [company_id])]" name="partner_bank_id"/>
                                        <field name="period_id" domain="[('state', '=', 'draft'), ('company_id', '=', company_id)]"
                                            groups="account.group_account_manager"
                                            string="Accounting Period"
                                            placeholder="force period"/>
                                        <field name="edit_invoice" readonly="1" />
                                    </group>
                                    <group>
                                        <field name="origin" groups="base.group_user"/>
                                        <field name="name" string="Customer Reference"/>
                                        <field name="move_id" groups="account.group_account_user"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Payments" groups="base.group_user">
                                <field name="payment_ids">
                                    <tree string="Payments">
                                        <field name="date"/>
                                        <field name="move_id"/>
                                        <field name="ref"/>
                                        <field name="name"/>
                                        <field name="journal_id" groups="base.group_user"/>
                                        <field name="debit"/>
                                        <field name="credit"/>
                                        <field name="amount_currency" groups="base.group_multi_currency"/>
                                        <field name="currency_id" groups="base.group_multi_currency"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
        
<!--	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
       			Invoice  - readonly for user , editable for manager  
  		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~        --> 
        <record id="view_invoice_form_readonly" model="ir.ui.view">
            <field name="name">view.invoice.form.readonly</field>
            <field name="model">account.invoice</field>
            <field name="groups_id" eval="[(6, 0, [ref('Trabacus.group_traccount_manager')])]"/>
            <field name="inherit_id" ref="Trabacus.view_invoice_form"/>
            <field name="arch" type="xml">
                <field name='edit_invoice' position="attributes">
                    <attribute name="readonly">0</attribute>
                </field>
            </field>
        </record>  
        
<!--	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
       			Customer Invoice:  
  		^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^	
--> 
        
<!--
      CI:  Holiday Package
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_pack">
            <field name="name">Invoice - Holiday Package</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','package'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'package', 'travel_type':'package'}</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_pack_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_pack"/>
        </record>
        
        <record id="action_trinvoice_pack_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form_pack"/>
            <field name="act_window_id" ref="action_trinvoice_pack"/>
        </record>
        
        <menuitem action="action_trinvoice_pack" id="menu_action_trinvoice_pack"
            name="Holiday package" parent="menu_tr_custinvoice" sequence="6"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
        
<!--
      CI:  Domestic Flight
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_domflight">
            <field name="name">Invoice - Domestic Flight</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','dom_flight'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'dom_flight', 'travel_type':'dom_flight','flight_travel_type':True}</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_domflight_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_domflight"/>
        </record>
        
        <record id="action_trinvoice_domflight_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_domflight"/>
        </record>
        
        <menuitem action="action_trinvoice_domflight" id="menu_action_trinvoice_domflight"
            name="Domestic Flight" parent="menu_tr_custinvoice" sequence="3"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CI:  International Flight
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_intflight">
            <field name="name">Invoice - International Flight</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','int_flight'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'int_flight', 'travel_type':'int_flight' ,'flight_travel_type':True}</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_intflight_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_intflight"/>
        </record>
        
        <record id="action_trinvoice_intflight_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_intflight"/>
        </record>
        
        <menuitem action="action_trinvoice_intflight" id="menu_action_trinvoice_intflight"
            name="International Flight" parent="menu_tr_custinvoice" sequence="4"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CI:  Domestic Hotel
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_domhotel">
            <field name="name">Invoice - Domestic Hotel</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','dom_hotel'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'dom_hotel', 'travel_type':'dom_hotel'}</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_domhotel_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_domhotel"/>
        </record>
        
        <record id="action_trinvoice_domhotel_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_domhotel"/>
        </record>
        
        <menuitem action="action_trinvoice_domhotel" id="menu_action_trinvoice_domhotel"
            name="Domestic Hotel" parent="menu_tr_custinvoice" sequence="5"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CI:  International Hotel
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_inthotel">
            <field name="name">Invoice - International Hotel</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','int_hotel'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'int_hotel', 'travel_type':'int_hotel' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_inthotel_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_inthotel"/>
        </record>
        
        <record id="action_trinvoice_inthotel_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_inthotel"/>
        </record>
        
        <menuitem action="action_trinvoice_inthotel" id="menu_action_trinvoice_inthotel"
            name="International Hotel" parent="menu_tr_custinvoice" sequence="6"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CI:  Transfers
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_car">
            <field name="name">Invoice - Transfers</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','car'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'car', 'travel_type':'car' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_car_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_car"/>
        </record>
        
        <record id="action_trinvoice_car_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_car"/>
        </record>
        
        <menuitem action="action_trinvoice_car" id="menu_action_trinvoice_car"
            name="Transfers" parent="menu_tr_custinvoice" sequence="7"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
            
<!--
      CI:  Activities
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_activity">
            <field name="name">Invoice - Activities</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','activity'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'activity', 'travel_type':'activity' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_activity_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_activity"/>
        </record>
        
        <record id="action_trinvoice_activity_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_activity"/>
        </record>
        
        <menuitem action="action_trinvoice_activity" id="menu_action_trinvoice_activity"
            name="Activities" parent="menu_tr_custinvoice" sequence="8"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
                    
            
<!--
      CI:  Add on
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_addon">
            <field name="name">Invoice - Add On</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','add_on'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'add_on', 'travel_type':'add_on' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_addon_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_addon"/>
        </record>
        
        <record id="action_trinvoice_addon_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_addon"/>
        </record>
        
        <menuitem action="action_trinvoice_addon" id="menu_action_trinvoice_addon"
            name="Add on" parent="menu_tr_custinvoice" sequence="9"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
                  
        

<!--
      CI:  Visa
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_visa">
            <field name="name">Invoice - Visa</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','visa'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'visa', 'travel_type':'visa' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_visa_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_visa"/>
        </record>
        
        <record id="action_trinvoice_visa_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_visa"/>
        </record>
        
        <menuitem action="action_trinvoice_visa" id="menu_action_trinvoice_visa"
            name="Visa" parent="menu_tr_custinvoice" sequence="10"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CI:  Insurance
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_ins">
            <field name="name">Invoice - Insurance</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','insurance'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'insurance', 'travel_type':'insurance' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_ins_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_ins"/>
        </record>
        
        <record id="action_trinvoice_ins_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_ins"/>
        </record>
        
        <menuitem action="action_trinvoice_ins" id="menu_action_trinvoice_ins"
            name="Insurance" parent="menu_tr_custinvoice" sequence="11"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CI:  Cruise
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_cruise">
            <field name="name">Invoice - Cruise</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','cruise'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'cruise', 'travel_type':'cruise' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_cruise_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_cruise"/>
        </record>
        
        <record id="action_trinvoice_cruise_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_cruise"/>
        </record>
        
        <menuitem action="action_trinvoice_cruise" id="menu_action_trinvoice_cruise"
            name="Cruise" parent="menu_tr_custinvoice" sequence="12"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
          
<!--
      CI:  Railway
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_rail">
            <field name="name">Invoice - Railway</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','railway'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'railway', 'travel_type':'railway' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_rail_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_rail"/>
        </record>
        
        <record id="action_trinvoice_rail_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_rail"/>
        </record>
        
        <menuitem action="action_trinvoice_rail" id="menu_action_trinvoice_rail"
            name="Railway" parent="menu_tr_custinvoice" sequence="13"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
                  
        
<!--
      CI:  Miscellaneous
-->         
        <record model="ir.actions.act_window" id="action_trinvoice_direct">
            <field name="name">Invoice - Miscellaneous</field>
            <field name="res_model">account.invoice</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="domain">[('type','=','out_invoice'), ('travel_type','=','direct'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale',
                'default_travel_type':'direct', 'travel_type':'direct' }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="invoice_search_view_tr"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer invoice.
                </p><p>
                    OpenERP's electronic invoicing allows to ease and fasten the
                    collection of customer payments. Your customer receives the
                    invoice by email and he can pay online and/or import it
                    in his own system.
                </p><p>
                    The discussions with your customer are automatically displayed at
                    the bottom of each invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trinvoice_direct_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trinvoice_direct"/>
        </record>
        
        <record id="action_trinvoice_direct_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trinvoice_direct"/>
        </record>
        
        <menuitem action="action_trinvoice_direct" id="menu_action_trinvoice_direct"
            name="Miscellaneous" parent="menu_tr_custinvoice" sequence="14"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
        
<!--	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
       			Credit Note:  
  		^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^	
--> 
        
<!--
      CN:  Holiday Package
--> 
        <record id="action_trcreditnote_pack" model="ir.actions.act_window">
            <field name="name">Credit Note - Holiday Package</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','package'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'package', 'travel_type':'package', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_pack_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_pack"/>
        </record>
        
        <record id="action_trcreditnote_pack_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form_pack"/>
            <field name="act_window_id" ref="action_trcreditnote_pack"/>
        </record>
        
        <menuitem action="action_trcreditnote_pack" id="menu_action_trcreditnote_pack"
            name="Holiday Package" parent="menu_tr_creditnote" sequence="6"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CN:  Domestic Flight
--> 
        <record id="action_trcreditnote_domflight" model="ir.actions.act_window">
            <field name="name">Credit Note - Domestic Flight</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','dom_flight'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'dom_flight', 'travel_type':'dom_flight', 'credit_view':True,'flight_travel_type':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
       <record id="action_trcreditnote_domflight_tree" model="ir.actions.act_window.view">
           <field eval="1" name="sequence"/>
           <field name="view_mode">tree</field>
           <field name="act_window_id" ref="action_trcreditnote_domflight"/>
        </record>
        
        <record id="action_trcreditnote_domflight_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_domflight"/>
        </record>
        
        <menuitem action="action_trcreditnote_domflight" id="menu_action_trcreditnote_domflight"
            name="Domestic Flight" parent="menu_tr_creditnote" sequence="3"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
<!--
      CN:  International Flight
-->   
        <record id="action_trcreditnote_intflight" model="ir.actions.act_window">
            <field name="name">Credit Note - International Flight</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','int_flight'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'int_flight', 'travel_type':'int_flight', 'credit_view':True,'flight_travel_type':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_intflight_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_intflight"/>
        </record>
        
        <record id="action_trcreditnote_intflight_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_intflight"/>
        </record>
        
        <menuitem action="action_trcreditnote_intflight" id="menu_action_trcreditnote_intflight"
            name="International Flight" parent="menu_tr_creditnote" sequence="4"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CN:  Domestic Hotel
--> 
        <record id="action_trcreditnote_domhotel" model="ir.actions.act_window">
            <field name="name">Credit Note - Domestic Hotel</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','dom_hotel'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'dom_hotel', 'travel_type':'dom_hotel', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_domhotel_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_domhotel"/>
        </record>
        
        <record id="action_trcreditnote_domhotel_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_domhotel"/>
        </record>
        
        <menuitem action="action_trcreditnote_domhotel" id="menu_action_trcreditnote_domhotel"
            name="Domestic Hotel" parent="menu_tr_creditnote" sequence="5"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CN:  International Hotel
-->   
        <record id="action_trcreditnote_inthotel" model="ir.actions.act_window">
            <field name="name">Credit Note - International Hotel</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','int_hotel'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'int_hotel', 'travel_type':'int_hotel', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_inthotel_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_inthotel"/>
        </record>
        
        <record id="action_trcreditnote_inthotel_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_inthotel"/>
        </record>
        
        <menuitem action="action_trcreditnote_inthotel" id="menu_action_trcreditnote_inthotel"
            name="International Hotel" parent="menu_tr_creditnote" sequence="6"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CN:  Transfers
-->   
        <record id="action_trcreditnote_car" model="ir.actions.act_window">
            <field name="name">Credit Note - Transfers</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','car'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'car', 'travel_type':'car', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_car_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_car"/>
        </record>
        
        <record id="action_trcreditnote_car_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_car"/>
        </record>
        
        <menuitem action="action_trcreditnote_car" id="menu_action_trcreditnote_car"
            name="Transfers" parent="menu_tr_creditnote" sequence="7"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
            
<!--
      CN:  Activities
-->

		<record id="action_trcreditnote_activity" model="ir.actions.act_window">
            <field name="name">Credit Note - Activity</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','activity'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'activity', 'travel_type':'activity', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_activity_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_activity"/>
        </record>
        
        <record id="action_trcreditnote_activity_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_activity"/>
        </record>
        
        <menuitem action="action_trcreditnote_activity" id="menu_action_trcreditnote_activity"
            name="Activities" parent="menu_tr_creditnote" sequence="8"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>            
        
<!--
      CN:  Add on
-->   
        <record id="action_trcreditnote_addon" model="ir.actions.act_window">
            <field name="name">Credit Note - Addon</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','addon'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'add_on', 'travel_type':'add_on', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_addon_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_addon"/>
        </record>
        
        <record id="action_trcreditnote_addon_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_addon"/>
        </record>
        
        <menuitem action="action_trcreditnote_addon" id="menu_action_trcreditnote_addon"
            name="Add On" parent="menu_tr_creditnote" sequence="9"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>       
        

        
<!--
      CN:  Visa
-->   
        <record id="action_trcreditnote_visa" model="ir.actions.act_window">
            <field name="name">Credit Note - Visa</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','visa'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'visa', 'travel_type':'visa', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_visa_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_visa"/>
        </record>
        
        <record id="action_trcreditnote_visa_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_visa"/>
        </record>
        
        <menuitem action="action_trcreditnote_visa" id="menu_action_trcreditnote_visa"
            name="Visa" parent="menu_tr_creditnote" sequence="10"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CN:  Insurance
-->   
        <record id="action_trcreditnote_ins" model="ir.actions.act_window">
            <field name="name">Credit Note - Insurance</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','insurance'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                                    'default_travel_type':'insurance', 'travel_type':'insurance', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_ins_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_ins"/>
        </record>
        
        <record id="action_trcreditnote_ins_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_ins"/>
        </record>
        
        <menuitem action="action_trcreditnote_ins" id="menu_action_trcreditnote_ins"
            name="Insurance" parent="menu_tr_creditnote" sequence="11"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CN:  Cruise
-->   
        <record id="action_trcreditnote_cruise" model="ir.actions.act_window">
            <field name="name">Credit Note - Cruise</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','cruise'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'cruise', 'travel_type':'cruise', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_cruise_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_cruise"/>
        </record>
        
        <record id="action_trcreditnote_cruise_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_cruise"/>
        </record>
        
        <menuitem action="action_trcreditnote_cruise" id="menu_action_trcreditnote_cruise"
            name="Cruise" parent="menu_tr_creditnote" sequence="12"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
            
<!--
      CN:  Railway
-->   
        <record id="action_trcreditnote_rail" model="ir.actions.act_window">
            <field name="name">Credit Note - Railway</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','railway'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'railway', 'travel_type':'railway', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_rail_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_rail"/>
        </record>
        
        <record id="action_trcreditnote_rail_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_rail"/>
        </record>
        
        <menuitem action="action_trcreditnote_rail" id="menu_action_trcreditnote_rail"
            name="Railway" parent="menu_tr_creditnote" sequence="13"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>
        
<!--
      CN:  Miscellaneous
-->   
        <record id="action_trcreditnote_misc" model="ir.actions.act_window">
            <field name="name">Credit Note - Miscellaneous</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund'), ('travel_type','=','direct'), ('state','not in',('quotation','order_cancel'))]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund',
                'default_travel_type':'direct', 'travel_type':'direct', 'credit_view':True}</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a customer refund. 
                </p><p>
                    A refund is a document that credits an invoice completely or
                    partially.
                </p><p>
                    Instead of manually creating a customer refund, you
                    can generate it directly from the related customer invoice.
                </p>
            </field>
        </record>
        
        <record id="action_trcreditnote_misc_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_trcreditnote_misc"/>
        </record>
        
        <record id="action_trcreditnote_misc_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_invoice_form"/>
            <field name="act_window_id" ref="action_trcreditnote_misc"/>
        </record>
        
        <menuitem action="action_trcreditnote_misc" id="menu_action_trcreditnote_misc"
            name="Miscellaneous" parent="menu_tr_creditnote" sequence="14"
            groups="Trabacus.group_traccount_user,Trabacus.group_traccount_consultant,Trabacus.group_traccount_manager"/>        
        
    </data>
</openerp>