<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		
		<!-- Rule : Lead -->


		<record id="tr_lead_personal_rule" model="ir.rule">
			<field name="name">Trabacus-Lead User</field>
			<field ref="crm.model_crm_lead" name="model_id"/>
			<field name="domain_force">[('user_id','=',user.id)]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trlead_user'))]"/>
		</record>

		<record id="tr_lead_consultant_rule" model="ir.rule">
			<field name="name">Trabacus-Lead Consultant</field>
			<field ref="crm.model_crm_lead" name="model_id"/>
			<field name="domain_force">[('consultant_id','=',user.id)]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trlead_consultant'))]"/>
		</record>

		<record id="tr_lead_manager_rule" model="ir.rule">
			<field name="name">Trabacus-Lead Manager</field>
			<field ref="crm.model_crm_lead" name="model_id"/>
			<field name="domain_force">[('user_id','in',[x.id for x in user.team_ids])]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trlead_manager'))]"/>
		</record>

		<record id="tr_lead_branch_head_rule" model="ir.rule">
			<field name="name">Trabacus-Lead Branch Head</field>
			<field ref="crm.model_crm_lead" name="model_id"/>
			<field name="domain_force">[(1,'=',1)]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trlead_branch_head'))]"/>
		</record>
		
		<!-- Rule : Sale -->
		<record id="tr_sale_personal_rule" model="ir.rule">
			<field name="name">Trabacus-Sale User</field>
			<field ref="account.model_account_invoice" name="model_id"/>
			<field name="domain_force">[('user_id','=',user.id)]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trsale_user')), (4, ref('Trabacus.group_traccount_user'))]"/>
		</record>

		<record id="tr_sale_consultant_rule" model="ir.rule">
			<field name="name">Trabacus-Sale Consultant</field>
			<field ref="account.model_account_invoice" name="model_id"/>
			<field name="domain_force">[('consultant_id','=',user.id)]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trsale_consultant')), (4, ref('Trabacus.group_traccount_consultant'))]"/>
		</record>
		
		<record id="tr_sale_manager_rule" model="ir.rule">
			<field name="name">Trabacus-Sale Manager</field>
			<field ref="account.model_account_invoice" name="model_id"/>
			<field name="domain_force">[('user_id','in',[x.id for x in user.team_ids])]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trsale_manager'))]"/>
		</record>
		
		<record id="tr_sale_branch_head_rule" model="ir.rule">
			<field name="name">Trabacus-Sale Branch Head</field>
			<field ref="account.model_account_invoice" name="model_id"/>
			<field name="domain_force">[(1,'=',1)]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trsale_branch_head')),(4, ref('Trabacus.group_traccount_manager'))]"/>
		</record>

		<!-- Rule : Purchase -->
		<record id="tr_purchase_personal_rule" model="ir.rule">
			<field name="name">Trabacus-Purchase User</field>
			<field ref="account.model_account_invoice" name="model_id"/>
			<field name="domain_force">[('user_id','=',user.id)]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trpurchase_user'))]"/>
		</record>
		
		<record id="tr_purchase_manager_rule" model="ir.rule">
			<field name="name">Trabacus-Purchase Manager</field>
			<field ref="account.model_account_invoice" name="model_id"/>
			<field name="domain_force">[('user_id','in',[x.id for x in user.team_ids])]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trpurchase_manager'))]"/>
		</record>
		
		<record id="tr_purchase_branch_head_rule" model="ir.rule">
			<field name="name">Trabacus-Purchase Branch Head</field>
			<field ref="account.model_account_invoice" name="model_id"/>
			<field name="domain_force">[(1,'=',1)]</field>
			<field name="groups" eval="[(4, ref('Trabacus.group_trpurchase_branch_head'))]"/>
		</record>
		
		
		<!-- Rule : Account 
		 
		<record id="tr_invoice_personal_rule" model="ir.rule">
			<field name="name">Trabacus-Personal Invoices</field>
			<field ref="account.model_account_invoice" name="model_id"/>
			<field name="domain_force">[('user_id','=',user.id)]</field>
			<field name="groups" eval="[(4, ref('group_traccount_user'))]"/>
		</record> --> 
		
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<!--							MULTICOMPANY										-->
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

		<!-- Voucher Terms-->
		
		<record model="ir.rule" id="tr_voucher_terms_rule">
			<field name="name">Trabacus Voucher-Terms Multi-Company</field>
			<field name="model_id" ref="model_tr_voucher_terms"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record> 

		<!--		Service Wise Accoutns-->
		
		<record model="ir.rule" id="tr_service_accounts_rule">
			<field name="name">Trabacus Service Wise Accounts Multi-Company</field>
			<field name="model_id" ref="model_tr_services_account"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record> 
		
	   <!-- Lead -->

		<record model="ir.rule" id="tr_crm_company_rule">
			<field name="name">Trabacus-Leads multi-company</field>
			<field name="model_id" ref="crm.model_crm_lead"/>
			<field name="global" eval="False"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record> 
	
		
		<!-- Standard Rules -->
		<record model="ir.rule" id="sale.sale_order_report_comp_rule">
			<field name="name">Sales Order Analysis multi-company</field>
			<field name="model_id" ref="sale.model_sale_report"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record model="ir.rule" id="sale.sale_order_line_comp_rule">
			<field name="name">Sales Order Line multi-company</field>
			<field name="model_id" ref="sale.model_sale_order_line"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record model="ir.rule" id="sale.sale_order_comp_rule">
			<field name="name">Sales Order multi-company</field>
			<field name="model_id" ref="sale.model_sale_order"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="base.res_currency_rule" model="ir.rule">
			<field name="name">multi-company currency rule</field>
			<field name="model_id" ref="base.model_res_currency"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record model="ir.rule" id="project.task_comp_rule">
			<field name="name">Project/Task: multi-company</field>
			<field name="model_id" ref="project.model_project_task"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
 
		<record id="product.product_comp_rule" model="ir.rule">
			<field name="name" >Product multi-company</field>
			<field name="model_id" ref="product.model_product_template"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record model="ir.rule" id="base.multi_company_default_rule">
			<field name="name">Multi_company_default company</field>
			<field name="model_id" ref="base.model_multi_company_default"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="base.property_rule" model="ir.rule">
			<field name="name">Property multi-company</field>
			<field name="model_id" ref="base.model_ir_property"/>
			<field eval="True" name="global"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account_voucher.voucher_line_comp_rule" model="ir.rule">
			<field name="name">Voucher Line multi-company</field>
			<field name="model_id" ref="account_voucher.model_account_voucher_line"/>
			<field eval="True" name="global"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account_voucher.voucher_comp_rule" model="ir.rule">
			<field name="name">Voucher multi-company</field>
			<field name="model_id" ref="account_voucher.model_account_voucher"/>
			<field eval="True" name="global"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account.tax_code_comp_rule" model="ir.rule">
			<field name="name">Tax code multi-company</field>
			<field name="model_id" ref="account.model_account_tax_code"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account.tax_comp_rule" model="ir.rule">
			<field name="name">Tax multi-company</field>
			<field name="model_id" ref="account.model_account_tax"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account.period_comp_rule" model="ir.rule">
			<field name="name">Period multi-company</field>
			<field name="model_id" ref="account.model_account_period"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>		
		
		<record id="account.journal_comp_rule" model="ir.rule">
			<field name="name">Journal multi-company</field>
			<field name="model_id" ref="account.model_account_journal"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>

		<record id="account.invoice_analysis_comp_rule" model="ir.rule">
			<field name="name">Invoice Analysis multi-company</field>
			<field name="model_id" ref="account.model_account_invoice_report"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account.invoice_comp_rule" model="ir.rule">
			<field name="name">Invoice multi-company</field>
			<field name="model_id" ref="account.model_account_invoice"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account.fiscal_year_comp_rule" model="ir.rule">
			<field name="name">Fiscal year multi-company</field>
			<field name="model_id" ref="account.model_account_fiscalyear"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account.entry_analysis_comp_rule" model="ir.rule">
			<field name="name">Entries Analysis multi-company</field>
			<field name="model_id" ref="account.model_account_entries_report"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="analytic.analytic_line_comp_rule" model="ir.rule">
			<field name="name">Analytic line multi company rule</field>
			<field name="model_id" ref="analytic.model_account_analytic_line"/>
			<field eval="True" name="global"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account.analytic_journal_comp_rule" model="ir.rule">
			<field name="name">Analytic journal multi-company</field>
			<field name="model_id" ref="account.model_account_analytic_journal"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="analytic.analytic_comp_rule" model="ir.rule">
			<field name="name">Analytic multi company rule</field>
			<field name="model_id" ref="analytic.model_account_analytic_account"/>
			<field eval="True" name="global"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<record id="account.account_comp_rule" model="ir.rule">
			<field name="name">Account multi-company</field>
			<field name="model_id" ref="account.model_account_account"/>
			<field name="global" eval="True"/>
			<field name="domain_force">['|',('company_id','in',[x.id for x in user.company_ids]),('company_id','=',False)]</field>
		</record>
		
		<!--    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~     To Inactive Standard Rules  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       -->
		
		<record id="crm.crm_rule_personal_lead" model="ir.rule">
			<field name="active" eval="False"/>
		</record>
		
		<record id="crm.crm_rule_all_lead" model="ir.rule">
			<field name="active" eval="False"/>
		</record>
		
	</data>
</openerp>